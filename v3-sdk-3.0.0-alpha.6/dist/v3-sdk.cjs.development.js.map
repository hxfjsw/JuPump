{"version":3,"file":"v3-sdk.cjs.development.js","sources":["../node_modules/regenerator-runtime/runtime.js","../src/constants.ts","../src/internalConstants.ts","../src/utils/computePoolAddress.ts","../src/utils/liquidityMath.ts","../src/utils/fullMath.ts","../src/utils/sqrtPriceMath.ts","../src/utils/swapMath.ts","../src/utils/mostSignificantBit.ts","../src/utils/tickMath.ts","../src/entities/tickDataProvider.ts","../src/utils/isSorted.ts","../src/utils/tickList.ts","../src/utils/calldata.ts","../src/utils/encodeRouteToPath.ts","../src/utils/encodeSqrtRatioX96.ts","../src/utils/maxLiquidityForAmounts.ts","../src/utils/nearestUsableTick.ts","../src/utils/priceTickConversions.ts","../src/entities/tick.ts","../src/entities/tickListDataProvider.ts","../src/entities/pool.ts","../src/entities/position.ts","../src/entities/route.ts","../src/entities/trade.ts","../src/selfPermit.ts","../src/nonfungiblePositionManager.ts","../src/swapRouter.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","export const FACTORY_ADDRESS = '0xA1e393178DDFD63af56cf0BfA759A6a85606558c'\r\n\r\nexport const ADDRESS_ZERO = '0x0000000000000000000000000000000000000000'\r\n\r\nexport const POOL_INIT_CODE_HASH = '0xd63426cf28b23363557856eaa7e085559e81e6b7794066479952bda868617297'\r\n\r\n/**\r\n * The default factory enabled fee amounts, denominated in hundredths of bips.\r\n */\r\nexport enum FeeAmount {\r\n  LOW = 500,\r\n  MEDIUM = 3000,\r\n  HIGH = 10000\r\n}\r\n\r\n/**\r\n * The default factory tick spacings by fee amount.\r\n */\r\nexport const TICK_SPACINGS: { [amount in FeeAmount]: number } = {\r\n  [FeeAmount.LOW]: 10,\r\n  [FeeAmount.MEDIUM]: 60,\r\n  [FeeAmount.HIGH]: 200\r\n}\r\n","import JSBI from 'jsbi'\n\n// constants used internally but not expected to be used externally\nexport const NEGATIVE_ONE = JSBI.BigInt(-1)\nexport const ZERO = JSBI.BigInt(0)\nexport const ONE = JSBI.BigInt(1)\n\n// used in liquidity amount math\nexport const Q96 = JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(96))\nexport const Q192 = JSBI.exponentiate(Q96, JSBI.BigInt(2))\n","import { defaultAbiCoder } from '@ethersproject/abi'\r\nimport { getCreate2Address } from '@ethersproject/address'\r\nimport { keccak256 } from '@ethersproject/solidity'\r\nimport { Token } from '@uniswap/sdk-core'\r\nimport { FeeAmount, POOL_INIT_CODE_HASH } from '../constants'\r\n\r\nexport function computePoolAddress({\r\n  factoryAddress,\r\n  tokenA,\r\n  tokenB,\r\n  fee\r\n}: {\r\n  factoryAddress: string\r\n  tokenA: Token\r\n  tokenB: Token\r\n  fee: FeeAmount\r\n}): string {\r\n  const [token0, token1] = tokenA.sortsBefore(tokenB) ? [tokenA, tokenB] : [tokenB, tokenA] // does safety checks\r\n  return getCreate2Address(\r\n    factoryAddress,\r\n    keccak256(\r\n      ['bytes'],\r\n      [defaultAbiCoder.encode(['address', 'address', 'uint24'], [token0.address, token1.address, fee])]\r\n    ),\r\n    POOL_INIT_CODE_HASH\r\n  )\r\n}\r\n\r\n// const MTK = new Token(2100000,\"0x1a180690efd9Aa55550178c548A5548310D500e6\",18)\r\n// const WETH9 = new Token(2100000,\"0x4d1b49b424afd7075d3c063addf97d5575e1c7e2\",18)\r\n// console.log(\"computePoolAddress\",computePoolAddress({factoryAddress:\"0xa8eDB7A6922113968896F82302B0E803216E9986\",tokenA:MTK,tokenB:WETH9,fee:FeeAmount.HIGH}))","import JSBI from 'jsbi'\nimport { NEGATIVE_ONE, ZERO } from '../internalConstants'\n\nexport abstract class LiquidityMath {\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static addDelta(x: JSBI, y: JSBI): JSBI {\n    if (JSBI.lessThan(y, ZERO)) {\n      return JSBI.subtract(x, JSBI.multiply(y, NEGATIVE_ONE))\n    } else {\n      return JSBI.add(x, y)\n    }\n  }\n}\n","import JSBI from 'jsbi'\nimport { ONE, ZERO } from '../internalConstants'\n\nexport abstract class FullMath {\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static mulDivRoundingUp(a: JSBI, b: JSBI, denominator: JSBI): JSBI {\n    const product = JSBI.multiply(a, b)\n    let result = JSBI.divide(product, denominator)\n    if (JSBI.notEqual(JSBI.remainder(product, denominator), ZERO)) result = JSBI.add(result, ONE)\n    return result\n  }\n}\n","import { MaxUint256 } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport invariant from 'tiny-invariant'\nimport { ONE, ZERO, Q96 } from '../internalConstants'\nimport { FullMath } from './fullMath'\n\nconst MaxUint160 = JSBI.subtract(JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(160)), ONE)\n\nfunction multiplyIn256(x: JSBI, y: JSBI): JSBI {\n  const product = JSBI.multiply(x, y)\n  return JSBI.bitwiseAnd(product, MaxUint256)\n}\n\nfunction addIn256(x: JSBI, y: JSBI): JSBI {\n  const sum = JSBI.add(x, y)\n  return JSBI.bitwiseAnd(sum, MaxUint256)\n}\n\nexport abstract class SqrtPriceMath {\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static getAmount0Delta(sqrtRatioAX96: JSBI, sqrtRatioBX96: JSBI, liquidity: JSBI, roundUp: boolean): JSBI {\n    if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n      ;[sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96]\n    }\n\n    const numerator1 = JSBI.leftShift(liquidity, JSBI.BigInt(96))\n    const numerator2 = JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96)\n\n    return roundUp\n      ? FullMath.mulDivRoundingUp(FullMath.mulDivRoundingUp(numerator1, numerator2, sqrtRatioBX96), ONE, sqrtRatioAX96)\n      : JSBI.divide(JSBI.divide(JSBI.multiply(numerator1, numerator2), sqrtRatioBX96), sqrtRatioAX96)\n  }\n\n  public static getAmount1Delta(sqrtRatioAX96: JSBI, sqrtRatioBX96: JSBI, liquidity: JSBI, roundUp: boolean): JSBI {\n    if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n      ;[sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96]\n    }\n\n    return roundUp\n      ? FullMath.mulDivRoundingUp(liquidity, JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96), Q96)\n      : JSBI.divide(JSBI.multiply(liquidity, JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96)), Q96)\n  }\n\n  public static getNextSqrtPriceFromInput(sqrtPX96: JSBI, liquidity: JSBI, amountIn: JSBI, zeroForOne: boolean): JSBI {\n    invariant(JSBI.greaterThan(sqrtPX96, ZERO))\n    invariant(JSBI.greaterThan(liquidity, ZERO))\n\n    return zeroForOne\n      ? this.getNextSqrtPriceFromAmount0RoundingUp(sqrtPX96, liquidity, amountIn, true)\n      : this.getNextSqrtPriceFromAmount1RoundingDown(sqrtPX96, liquidity, amountIn, true)\n  }\n\n  public static getNextSqrtPriceFromOutput(\n    sqrtPX96: JSBI,\n    liquidity: JSBI,\n    amountOut: JSBI,\n    zeroForOne: boolean\n  ): JSBI {\n    invariant(JSBI.greaterThan(sqrtPX96, ZERO))\n    invariant(JSBI.greaterThan(liquidity, ZERO))\n\n    return zeroForOne\n      ? this.getNextSqrtPriceFromAmount1RoundingDown(sqrtPX96, liquidity, amountOut, false)\n      : this.getNextSqrtPriceFromAmount0RoundingUp(sqrtPX96, liquidity, amountOut, false)\n  }\n\n  private static getNextSqrtPriceFromAmount0RoundingUp(\n    sqrtPX96: JSBI,\n    liquidity: JSBI,\n    amount: JSBI,\n    add: boolean\n  ): JSBI {\n    if (JSBI.equal(amount, ZERO)) return sqrtPX96\n    const numerator1 = JSBI.leftShift(liquidity, JSBI.BigInt(96))\n\n    if (add) {\n      let product = multiplyIn256(amount, sqrtPX96)\n      if (JSBI.equal(JSBI.divide(product, amount), sqrtPX96)) {\n        const denominator = addIn256(numerator1, product)\n        if (JSBI.greaterThanOrEqual(denominator, numerator1)) {\n          return FullMath.mulDivRoundingUp(numerator1, sqrtPX96, denominator)\n        }\n      }\n\n      return FullMath.mulDivRoundingUp(numerator1, ONE, JSBI.add(JSBI.divide(numerator1, sqrtPX96), amount))\n    } else {\n      let product = multiplyIn256(amount, sqrtPX96)\n\n      invariant(JSBI.equal(JSBI.divide(product, amount), sqrtPX96))\n      invariant(JSBI.greaterThan(numerator1, product))\n      const denominator = JSBI.subtract(numerator1, product)\n      return FullMath.mulDivRoundingUp(numerator1, sqrtPX96, denominator)\n    }\n  }\n\n  private static getNextSqrtPriceFromAmount1RoundingDown(\n    sqrtPX96: JSBI,\n    liquidity: JSBI,\n    amount: JSBI,\n    add: boolean\n  ): JSBI {\n    if (add) {\n      const quotient = JSBI.lessThanOrEqual(amount, MaxUint160)\n        ? JSBI.divide(JSBI.leftShift(amount, JSBI.BigInt(96)), liquidity)\n        : JSBI.divide(JSBI.multiply(amount, Q96), liquidity)\n\n      return JSBI.add(sqrtPX96, quotient)\n    } else {\n      const quotient = FullMath.mulDivRoundingUp(amount, Q96, liquidity)\n\n      invariant(JSBI.greaterThan(sqrtPX96, quotient))\n      return JSBI.subtract(sqrtPX96, quotient)\n    }\n  }\n}\n","import JSBI from 'jsbi'\nimport { FeeAmount } from '../constants'\nimport { NEGATIVE_ONE, ZERO } from '../internalConstants'\nimport { FullMath } from './fullMath'\nimport { SqrtPriceMath } from './sqrtPriceMath'\n\nconst MAX_FEE = JSBI.exponentiate(JSBI.BigInt(10), JSBI.BigInt(6))\n\nexport abstract class SwapMath {\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static computeSwapStep(\n    sqrtRatioCurrentX96: JSBI,\n    sqrtRatioTargetX96: JSBI,\n    liquidity: JSBI,\n    amountRemaining: JSBI,\n    feePips: FeeAmount\n  ): [JSBI, JSBI, JSBI, JSBI] {\n    const returnValues: Partial<{\n      sqrtRatioNextX96: JSBI\n      amountIn: JSBI\n      amountOut: JSBI\n      feeAmount: JSBI\n    }> = {}\n\n    const zeroForOne = JSBI.greaterThanOrEqual(sqrtRatioCurrentX96, sqrtRatioTargetX96)\n    const exactIn = JSBI.greaterThanOrEqual(amountRemaining, ZERO)\n\n    if (exactIn) {\n      const amountRemainingLessFee = JSBI.divide(\n        JSBI.multiply(amountRemaining, JSBI.subtract(MAX_FEE, JSBI.BigInt(feePips))),\n        MAX_FEE\n      )\n      returnValues.amountIn = zeroForOne\n        ? SqrtPriceMath.getAmount0Delta(sqrtRatioTargetX96, sqrtRatioCurrentX96, liquidity, true)\n        : SqrtPriceMath.getAmount1Delta(sqrtRatioCurrentX96, sqrtRatioTargetX96, liquidity, true)\n      if (JSBI.greaterThanOrEqual(amountRemainingLessFee, returnValues.amountIn!)) {\n        returnValues.sqrtRatioNextX96 = sqrtRatioTargetX96\n      } else {\n        returnValues.sqrtRatioNextX96 = SqrtPriceMath.getNextSqrtPriceFromInput(\n          sqrtRatioCurrentX96,\n          liquidity,\n          amountRemainingLessFee,\n          zeroForOne\n        )\n      }\n    } else {\n      returnValues.amountOut = zeroForOne\n        ? SqrtPriceMath.getAmount1Delta(sqrtRatioTargetX96, sqrtRatioCurrentX96, liquidity, false)\n        : SqrtPriceMath.getAmount0Delta(sqrtRatioCurrentX96, sqrtRatioTargetX96, liquidity, false)\n      if (JSBI.greaterThanOrEqual(JSBI.multiply(amountRemaining, NEGATIVE_ONE), returnValues.amountOut)) {\n        returnValues.sqrtRatioNextX96 = sqrtRatioTargetX96\n      } else {\n        returnValues.sqrtRatioNextX96 = SqrtPriceMath.getNextSqrtPriceFromOutput(\n          sqrtRatioCurrentX96,\n          liquidity,\n          JSBI.multiply(amountRemaining, NEGATIVE_ONE),\n          zeroForOne\n        )\n      }\n    }\n\n    const max = JSBI.equal(sqrtRatioTargetX96, returnValues.sqrtRatioNextX96)\n\n    if (zeroForOne) {\n      returnValues.amountIn =\n        max && exactIn\n          ? returnValues.amountIn\n          : SqrtPriceMath.getAmount0Delta(returnValues.sqrtRatioNextX96, sqrtRatioCurrentX96, liquidity, true)\n      returnValues.amountOut =\n        max && !exactIn\n          ? returnValues.amountOut\n          : SqrtPriceMath.getAmount1Delta(returnValues.sqrtRatioNextX96, sqrtRatioCurrentX96, liquidity, false)\n    } else {\n      returnValues.amountIn =\n        max && exactIn\n          ? returnValues.amountIn\n          : SqrtPriceMath.getAmount1Delta(sqrtRatioCurrentX96, returnValues.sqrtRatioNextX96, liquidity, true)\n      returnValues.amountOut =\n        max && !exactIn\n          ? returnValues.amountOut\n          : SqrtPriceMath.getAmount0Delta(sqrtRatioCurrentX96, returnValues.sqrtRatioNextX96, liquidity, false)\n    }\n\n    if (!exactIn && JSBI.greaterThan(returnValues.amountOut!, JSBI.multiply(amountRemaining, NEGATIVE_ONE))) {\n      returnValues.amountOut = JSBI.multiply(amountRemaining, NEGATIVE_ONE)\n    }\n\n    if (exactIn && JSBI.notEqual(returnValues.sqrtRatioNextX96, sqrtRatioTargetX96)) {\n      // we didn't reach the target, so take the remainder of the maximum input as fee\n      returnValues.feeAmount = JSBI.subtract(amountRemaining, returnValues.amountIn!)\n    } else {\n      returnValues.feeAmount = FullMath.mulDivRoundingUp(\n        returnValues.amountIn!,\n        JSBI.BigInt(feePips),\n        JSBI.subtract(MAX_FEE, JSBI.BigInt(feePips))\n      )\n    }\n\n    return [returnValues.sqrtRatioNextX96!, returnValues.amountIn!, returnValues.amountOut!, returnValues.feeAmount!]\n  }\n}\n","import { MaxUint256 } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport invariant from 'tiny-invariant'\nimport { ZERO } from '../internalConstants'\n\nconst TWO = JSBI.BigInt(2)\nconst POWERS_OF_2 = [128, 64, 32, 16, 8, 4, 2, 1].map((pow: number): [number, JSBI] => [\n  pow,\n  JSBI.exponentiate(TWO, JSBI.BigInt(pow))\n])\n\nexport function mostSignificantBit(x: JSBI): number {\n  invariant(JSBI.greaterThan(x, ZERO), 'ZERO')\n  invariant(JSBI.lessThanOrEqual(x, MaxUint256), 'MAX')\n\n  let msb: number = 0\n  for (const [power, min] of POWERS_OF_2) {\n    if (JSBI.greaterThanOrEqual(x, min)) {\n      x = JSBI.signedRightShift(x, JSBI.BigInt(power))\n      msb += power\n    }\n  }\n  return msb\n}\n","import { MaxUint256 } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport invariant from 'tiny-invariant'\nimport { ONE, ZERO } from '../internalConstants'\nimport { mostSignificantBit } from './mostSignificantBit'\n\nfunction mulShift(val: JSBI, mulBy: string): JSBI {\n  return JSBI.signedRightShift(JSBI.multiply(val, JSBI.BigInt(mulBy)), JSBI.BigInt(128))\n}\n\nconst Q32 = JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(32))\n\nexport abstract class TickMath {\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  /**\n   * The minimum tick that can be used on any pool.\n   */\n  public static MIN_TICK: number = -887272\n  /**\n   * The maximum tick that can be used on any pool.\n   */\n  public static MAX_TICK: number = -TickMath.MIN_TICK\n\n  /**\n   * The sqrt ratio corresponding to the minimum tick that could be used on any pool.\n   */\n  public static MIN_SQRT_RATIO: JSBI = JSBI.BigInt('4295128739')\n  /**\n   * The sqrt ratio corresponding to the maximum tick that could be used on any pool.\n   */\n  public static MAX_SQRT_RATIO: JSBI = JSBI.BigInt('1461446703485210103287273052203988822378723970342')\n\n  /**\n   * Returns the sqrt ratio as a Q64.96 for the given tick. The sqrt ratio is computed as sqrt(1.0001)^tick\n   * @param tick the tick for which to compute the sqrt ratio\n   */\n  public static getSqrtRatioAtTick(tick: number): JSBI {\n    invariant(tick >= TickMath.MIN_TICK && tick <= TickMath.MAX_TICK && Number.isInteger(tick), 'TICK')\n    const absTick: number = tick < 0 ? tick * -1 : tick\n\n    let ratio: JSBI =\n      (absTick & 0x1) != 0\n        ? JSBI.BigInt('0xfffcb933bd6fad37aa2d162d1a594001')\n        : JSBI.BigInt('0x100000000000000000000000000000000')\n    if ((absTick & 0x2) != 0) ratio = mulShift(ratio, '0xfff97272373d413259a46990580e213a')\n    if ((absTick & 0x4) != 0) ratio = mulShift(ratio, '0xfff2e50f5f656932ef12357cf3c7fdcc')\n    if ((absTick & 0x8) != 0) ratio = mulShift(ratio, '0xffe5caca7e10e4e61c3624eaa0941cd0')\n    if ((absTick & 0x10) != 0) ratio = mulShift(ratio, '0xffcb9843d60f6159c9db58835c926644')\n    if ((absTick & 0x20) != 0) ratio = mulShift(ratio, '0xff973b41fa98c081472e6896dfb254c0')\n    if ((absTick & 0x40) != 0) ratio = mulShift(ratio, '0xff2ea16466c96a3843ec78b326b52861')\n    if ((absTick & 0x80) != 0) ratio = mulShift(ratio, '0xfe5dee046a99a2a811c461f1969c3053')\n    if ((absTick & 0x100) != 0) ratio = mulShift(ratio, '0xfcbe86c7900a88aedcffc83b479aa3a4')\n    if ((absTick & 0x200) != 0) ratio = mulShift(ratio, '0xf987a7253ac413176f2b074cf7815e54')\n    if ((absTick & 0x400) != 0) ratio = mulShift(ratio, '0xf3392b0822b70005940c7a398e4b70f3')\n    if ((absTick & 0x800) != 0) ratio = mulShift(ratio, '0xe7159475a2c29b7443b29c7fa6e889d9')\n    if ((absTick & 0x1000) != 0) ratio = mulShift(ratio, '0xd097f3bdfd2022b8845ad8f792aa5825')\n    if ((absTick & 0x2000) != 0) ratio = mulShift(ratio, '0xa9f746462d870fdf8a65dc1f90e061e5')\n    if ((absTick & 0x4000) != 0) ratio = mulShift(ratio, '0x70d869a156d2a1b890bb3df62baf32f7')\n    if ((absTick & 0x8000) != 0) ratio = mulShift(ratio, '0x31be135f97d08fd981231505542fcfa6')\n    if ((absTick & 0x10000) != 0) ratio = mulShift(ratio, '0x9aa508b5b7a84e1c677de54f3e99bc9')\n    if ((absTick & 0x20000) != 0) ratio = mulShift(ratio, '0x5d6af8dedb81196699c329225ee604')\n    if ((absTick & 0x40000) != 0) ratio = mulShift(ratio, '0x2216e584f5fa1ea926041bedfe98')\n    if ((absTick & 0x80000) != 0) ratio = mulShift(ratio, '0x48a170391f7dc42444e8fa2')\n\n    if (tick > 0) ratio = JSBI.divide(MaxUint256, ratio)\n\n    // back to Q96\n    return JSBI.greaterThan(JSBI.remainder(ratio, Q32), ZERO)\n      ? JSBI.add(JSBI.divide(ratio, Q32), ONE)\n      : JSBI.divide(ratio, Q32)\n  }\n\n  /**\n   * Returns the tick corresponding to a given sqrt ratio, s.t. #getSqrtRatioAtTick(tick) <= sqrtRatioX96\n   * and #getSqrtRatioAtTick(tick + 1) > sqrtRatioX96\n   * @param sqrtRatioX96 the sqrt ratio as a Q64.96 for which to compute the tick\n   */\n  public static getTickAtSqrtRatio(sqrtRatioX96: JSBI): number {\n    invariant(\n      JSBI.greaterThanOrEqual(sqrtRatioX96, TickMath.MIN_SQRT_RATIO) &&\n        JSBI.lessThan(sqrtRatioX96, TickMath.MAX_SQRT_RATIO),\n      'SQRT_RATIO'\n    )\n\n    const sqrtRatioX128 = JSBI.leftShift(sqrtRatioX96, JSBI.BigInt(32))\n\n    const msb = mostSignificantBit(sqrtRatioX128)\n\n    let r: JSBI\n    if (JSBI.greaterThanOrEqual(JSBI.BigInt(msb), JSBI.BigInt(128))) {\n      r = JSBI.signedRightShift(sqrtRatioX128, JSBI.BigInt(msb - 127))\n    } else {\n      r = JSBI.leftShift(sqrtRatioX128, JSBI.BigInt(127 - msb))\n    }\n\n    let log_2: JSBI = JSBI.leftShift(JSBI.subtract(JSBI.BigInt(msb), JSBI.BigInt(128)), JSBI.BigInt(64))\n\n    for (let i = 0; i < 14; i++) {\n      r = JSBI.signedRightShift(JSBI.multiply(r, r), JSBI.BigInt(127))\n      const f = JSBI.signedRightShift(r, JSBI.BigInt(128))\n      log_2 = JSBI.bitwiseOr(log_2, JSBI.leftShift(f, JSBI.BigInt(63 - i)))\n      r = JSBI.signedRightShift(r, f)\n    }\n\n    const log_sqrt10001 = JSBI.multiply(log_2, JSBI.BigInt('255738958999603826347141'))\n\n    const tickLow = JSBI.toNumber(\n      JSBI.signedRightShift(\n        JSBI.subtract(log_sqrt10001, JSBI.BigInt('3402992956809132418596140100660247210')),\n        JSBI.BigInt(128)\n      )\n    )\n    const tickHigh = JSBI.toNumber(\n      JSBI.signedRightShift(\n        JSBI.add(log_sqrt10001, JSBI.BigInt('291339464771989622907027621153398088495')),\n        JSBI.BigInt(128)\n      )\n    )\n\n    return tickLow === tickHigh\n      ? tickLow\n      : JSBI.lessThanOrEqual(TickMath.getSqrtRatioAtTick(tickHigh), sqrtRatioX96)\n      ? tickHigh\n      : tickLow\n  }\n}\n","import { BigintIsh } from '@uniswap/sdk-core'\n\n/**\n * Provides information about ticks\n */\nexport interface TickDataProvider {\n  /**\n   * Return information corresponding to a specific tick\n   * @param tick the tick to load\n   */\n  getTick(tick: number): Promise<{ liquidityNet: BigintIsh }>\n\n  /**\n   * Return the next tick that is initialized within a single word\n   * @param tick the current tick\n   * @param lte whether the next tick should be lte the current tick\n   * @param tickSpacing the tick spacing of the pool\n   */\n  nextInitializedTickWithinOneWord(tick: number, lte: boolean, tickSpacing: number): Promise<[number, boolean]>\n}\n\n/**\n * This tick data provider does not know how to fetch any tick data. It throws whenever it is required. Useful if you\n * do not need to load tick data for your use case.\n */\nexport class NoTickDataProvider implements TickDataProvider {\n  private static ERROR_MESSAGE = 'No tick data provider was given'\n  async getTick(_tick: number): Promise<{ liquidityNet: BigintIsh }> {\n    throw new Error(NoTickDataProvider.ERROR_MESSAGE)\n  }\n\n  async nextInitializedTickWithinOneWord(\n    _tick: number,\n    _lte: boolean,\n    _tickSpacing: number\n  ): Promise<[number, boolean]> {\n    throw new Error(NoTickDataProvider.ERROR_MESSAGE)\n  }\n}\n","export function isSorted<T>(list: Array<T>, comparator: (a: T, b: T) => number): boolean {\n  for (let i = 0; i < list.length - 1; i++) {\n    if (comparator(list[i], list[i + 1]) > 0) {\n      return false\n    }\n  }\n  return true\n}\n","import JSBI from 'jsbi'\nimport invariant from 'tiny-invariant'\nimport { ZERO } from '../internalConstants'\nimport { isSorted } from './isSorted'\nimport { Tick } from '../entities/tick'\n\nfunction tickComparator(a: Tick, b: Tick) {\n  return a.index - b.index\n}\n\n/**\n * Utility methods for interacting with sorted lists of ticks\n */\nexport abstract class TickList {\n  /**\n   * Cannot be constructed\n   */\n  private constructor() {}\n\n  public static validateList(ticks: Tick[], tickSpacing: number) {\n    invariant(tickSpacing > 0, 'TICK_SPACING_NONZERO')\n    // ensure ticks are spaced appropriately\n    invariant(\n      ticks.every(({ index }) => index % tickSpacing === 0),\n      'TICK_SPACING'\n    )\n\n    // ensure tick liquidity deltas sum to 0\n    invariant(\n      JSBI.equal(\n        ticks.reduce((accumulator, { liquidityNet }) => JSBI.add(accumulator, liquidityNet), ZERO),\n        ZERO\n      ),\n      'ZERO_NET'\n    )\n\n    invariant(isSorted(ticks, tickComparator), 'SORTED')\n  }\n\n  public static isBelowSmallest(ticks: readonly Tick[], tick: number): boolean {\n    invariant(ticks.length > 0, 'LENGTH')\n    return tick < ticks[0].index\n  }\n\n  public static isAtOrAboveLargest(ticks: readonly Tick[], tick: number): boolean {\n    invariant(ticks.length > 0, 'LENGTH')\n    return tick >= ticks[ticks.length - 1].index\n  }\n\n  public static getTick(ticks: readonly Tick[], index: number): Tick {\n    const tick = ticks[this.binarySearch(ticks, index)]\n    invariant(tick.index === index, 'NOT_CONTAINED')\n    return tick\n  }\n\n  /**\n   * Finds the largest tick in the list of ticks that is less than or equal to tick\n   * @param ticks list of ticks\n   * @param tick tick to find the largest tick that is less than or equal to tick\n   * @private\n   */\n  private static binarySearch(ticks: readonly Tick[], tick: number): number {\n    invariant(!this.isBelowSmallest(ticks, tick), 'BELOW_SMALLEST')\n\n    let l = 0\n    let r = ticks.length - 1\n    let i\n    while (true) {\n      i = Math.floor((l + r) / 2)\n\n      if (ticks[i].index <= tick && (i === ticks.length - 1 || ticks[i + 1].index > tick)) {\n        return i\n      }\n\n      if (ticks[i].index < tick) {\n        l = i + 1\n      } else {\n        r = i - 1\n      }\n    }\n  }\n\n  public static nextInitializedTick(ticks: readonly Tick[], tick: number, lte: boolean): Tick {\n    if (lte) {\n      invariant(!TickList.isBelowSmallest(ticks, tick), 'BELOW_SMALLEST')\n      if (TickList.isAtOrAboveLargest(ticks, tick)) {\n        return ticks[ticks.length - 1]\n      }\n      const index = this.binarySearch(ticks, tick)\n      return ticks[index]\n    } else {\n      invariant(!this.isAtOrAboveLargest(ticks, tick), 'AT_OR_ABOVE_LARGEST')\n      if (this.isBelowSmallest(ticks, tick)) {\n        return ticks[0]\n      }\n      const index = this.binarySearch(ticks, tick)\n      return ticks[index + 1]\n    }\n  }\n\n  public static nextInitializedTickWithinOneWord(\n    ticks: readonly Tick[],\n    tick: number,\n    lte: boolean,\n    tickSpacing: number\n  ): [number, boolean] {\n    const compressed = Math.floor(tick / tickSpacing) // matches rounding in the code\n\n    if (lte) {\n      const wordPos = compressed >> 8\n      const minimum = (wordPos << 8) * tickSpacing\n\n      if (TickList.isBelowSmallest(ticks, tick)) {\n        return [minimum, false]\n      }\n\n      const index = TickList.nextInitializedTick(ticks, tick, lte).index\n      const nextInitializedTick = Math.max(minimum, index)\n      return [nextInitializedTick, nextInitializedTick === index]\n    } else {\n      const wordPos = (compressed + 1) >> 8\n      const maximum = ((wordPos + 1) << 8) * tickSpacing - 1\n\n      if (this.isAtOrAboveLargest(ticks, tick)) {\n        return [maximum, false]\n      }\n\n      const index = this.nextInitializedTick(ticks, tick, lte).index\n      const nextInitializedTick = Math.min(maximum, index)\n      return [nextInitializedTick, nextInitializedTick === index]\n    }\n  }\n}\n","import { BigintIsh } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\n\n/**\n * Generated method parameters for executing a call.\n */\nexport interface MethodParameters {\n  /**\n   * The hex encoded calldata to perform the given operation\n   */\n  calldata: string\n  /**\n   * The amount of ether (wei) to send in hex.\n   */\n  value: string\n}\n\nexport function toHex(bigintIsh: BigintIsh) {\n  const bigInt = JSBI.BigInt(bigintIsh)\n  let hex = bigInt.toString(16)\n  if (hex.length % 2 !== 0) {\n    hex = `0${hex}`\n  }\n  return `0x${hex}`\n}\n","import { pack } from '@ethersproject/solidity'\nimport { Currency, Token ,ChainId,WETH9} from '@uniswap/sdk-core'\nimport { Pool } from '../entities/pool'\nimport { Route } from '../entities/route'\n\nfunction wrappedCurrency(currency: Currency, chainId: ChainId): Token {\n  if (currency.isToken) {\n    // invariant(currency.chainId === chainId, 'CHAIN_ID')\n    return currency\n  }\n  if (chainId === 210000) {\n    const WJU = new Token(210000, '0x4d1b49b424afd7075d3c063addf97d5575e1c7e2', 18, 'WJU', 'Wrapped JU')\n    return WJU\n  }\n  if (currency.isEther) return WETH9[chainId]\n  throw new Error('CURRENCY')\n}\n\n/**\n * Converts a route to a hex encoded path\n * @param route the v3 path to convert to an encoded path\n * @param exactOutput whether the route should be encoded in reverse, for making exact output swaps\n */\nexport function encodeRouteToPath(route: Route<Currency, Currency>, exactOutput: boolean): string {\n  const firstInputToken: Token = wrappedCurrency(route.input, route.chainId)\n\n  const { path, types } = route.pools.reduce(\n    (\n      { inputToken, path, types }: { inputToken: Token; path: (string | number)[]; types: string[] },\n      pool: Pool,\n      index\n    ): { inputToken: Token; path: (string | number)[]; types: string[] } => {\n      const outputToken: Token = pool.token0.equals(inputToken) ? pool.token1 : pool.token0\n      if (index === 0) {\n        return {\n          inputToken: outputToken,\n          types: ['address', 'uint24', 'address'],\n          path: [inputToken.address, pool.fee, outputToken.address]\n        }\n      } else {\n        return {\n          inputToken: outputToken,\n          types: [...types, 'uint24', 'address'],\n          path: [...path, pool.fee, outputToken.address]\n        }\n      }\n    },\n    { inputToken: firstInputToken, path: [], types: [] }\n  )\n\n  return exactOutput ? pack(types.reverse(), path.reverse()) : pack(types, path)\n}\n","import JSBI from 'jsbi'\nimport { BigintIsh, sqrt } from '@uniswap/sdk-core'\n\n/**\n * Returns the sqrt ratio as a Q64.96 corresponding to a given ratio of amount1 and amount0\n * @param amount1 the numerator amount, i.e. amount of token1\n * @param amount0 the denominator amount, i.en amount of token0\n */\nexport function encodeSqrtRatioX96(amount1: BigintIsh, amount0: BigintIsh): JSBI {\n  const numerator = JSBI.leftShift(JSBI.BigInt(amount1), JSBI.BigInt(192))\n  const denominator = JSBI.BigInt(amount0)\n  const ratioX192 = JSBI.divide(numerator, denominator)\n  return sqrt(ratioX192)\n}\n","import { BigintIsh } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport { Q96 } from '../internalConstants'\n\nfunction maxLiquidityForAmount0Imprecise(sqrtRatioAX96: JSBI, sqrtRatioBX96: JSBI, amount0: BigintIsh): JSBI {\n  if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n    ;[sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96]\n  }\n  const intermediate = JSBI.divide(JSBI.multiply(sqrtRatioAX96, sqrtRatioBX96), Q96)\n  return JSBI.divide(JSBI.multiply(JSBI.BigInt(amount0), intermediate), JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96))\n}\n\nfunction maxLiquidityForAmount0Precise(sqrtRatioAX96: JSBI, sqrtRatioBX96: JSBI, amount0: BigintIsh): JSBI {\n  if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n    ;[sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96]\n  }\n\n  const numerator = JSBI.multiply(JSBI.multiply(JSBI.BigInt(amount0), sqrtRatioAX96), sqrtRatioBX96)\n  const denominator = JSBI.multiply(Q96, JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96))\n\n  return JSBI.divide(numerator, denominator)\n}\n\nfunction maxLiquidityForAmount1(sqrtRatioAX96: JSBI, sqrtRatioBX96: JSBI, amount1: BigintIsh): JSBI {\n  if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n    ;[sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96]\n  }\n  return JSBI.divide(JSBI.multiply(JSBI.BigInt(amount1), Q96), JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96))\n}\n\n/**\n * Computes the maximum amount of liquidity received for a given amount of token0, token1,\n * and the prices at the tick boundaries.\n * @param sqrtRatioCurrentX96 the current price\n * @param sqrtRatioAX96 price at lower boundary\n * @param sqrtRatioBX96 price at upper boundary\n * @param amount0 token0 amount\n * @param amount1 token1 amount\n * @param useFullPrecision if false, liquidity will be maximized according to what the router can calculate,\n * not what core can theoretically support\n */\nexport function maxLiquidityForAmounts(\n  sqrtRatioCurrentX96: JSBI,\n  sqrtRatioAX96: JSBI,\n  sqrtRatioBX96: JSBI,\n  amount0: BigintIsh,\n  amount1: BigintIsh,\n  useFullPrecision: boolean\n): JSBI {\n  if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n    ;[sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96]\n  }\n\n  const maxLiquidityForAmount0 = useFullPrecision ? maxLiquidityForAmount0Precise : maxLiquidityForAmount0Imprecise\n\n  if (JSBI.lessThanOrEqual(sqrtRatioCurrentX96, sqrtRatioAX96)) {\n    return maxLiquidityForAmount0(sqrtRatioAX96, sqrtRatioBX96, amount0)\n  } else if (JSBI.lessThan(sqrtRatioCurrentX96, sqrtRatioBX96)) {\n    const liquidity0 = maxLiquidityForAmount0(sqrtRatioCurrentX96, sqrtRatioBX96, amount0)\n    const liquidity1 = maxLiquidityForAmount1(sqrtRatioAX96, sqrtRatioCurrentX96, amount1)\n    return JSBI.lessThan(liquidity0, liquidity1) ? liquidity0 : liquidity1\n  } else {\n    return maxLiquidityForAmount1(sqrtRatioAX96, sqrtRatioBX96, amount1)\n  }\n}\n","import invariant from 'tiny-invariant'\nimport { TickMath } from './tickMath'\n\n/**\n * Returns the closest tick that is nearest a given tick and usable for the given tick spacing\n * @param tick the target tick\n * @param tickSpacing the spacing of the pool\n */\nexport function nearestUsableTick(tick: number, tickSpacing: number) {\n  invariant(Number.isInteger(tick) && Number.isInteger(tickSpacing), 'INTEGERS')\n  invariant(tickSpacing > 0, 'TICK_SPACING')\n  invariant(tick >= TickMath.MIN_TICK && tick <= TickMath.MAX_TICK, 'TICK_BOUND')\n  const rounded = Math.round(tick / tickSpacing) * tickSpacing\n  if (rounded < TickMath.MIN_TICK) return rounded + tickSpacing\n  else if (rounded > TickMath.MAX_TICK) return rounded - tickSpacing\n  else return rounded\n}\n","import { Price, Token } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport { Q192 } from '../internalConstants'\nimport { encodeSqrtRatioX96 } from './encodeSqrtRatioX96'\nimport { TickMath } from './tickMath'\n\n/**\n * Returns a price object corresponding to the input tick and the base/quote token\n * Inputs must be tokens because the address order is used to interpret the price represented by the tick\n * @param baseToken the base token of the price\n * @param quoteToken the quote token of the price\n * @param tick the tick for which to return the price\n */\nexport function tickToPrice(baseToken: Token, quoteToken: Token, tick: number): Price<Token, Token> {\n  const sqrtRatioX96 = TickMath.getSqrtRatioAtTick(tick)\n\n  const ratioX192 = JSBI.multiply(sqrtRatioX96, sqrtRatioX96)\n\n  return baseToken.sortsBefore(quoteToken)\n    ? new Price(baseToken, quoteToken, Q192, ratioX192)\n    : new Price(baseToken, quoteToken, ratioX192, Q192)\n}\n\n/**\n * Returns the first tick for which the given price is greater than or equal to the tick price\n * @param price for which to return the closest tick that represents a price less than or equal to the input price,\n * i.e. the price of the returned tick is less than or equal to the input price\n */\nexport function priceToClosestTick(price: Price<Token, Token>): number {\n  const sorted = price.baseCurrency.sortsBefore(price.quoteCurrency)\n\n  const sqrtRatioX96 = sorted\n    ? encodeSqrtRatioX96(price.numerator, price.denominator)\n    : encodeSqrtRatioX96(price.denominator, price.numerator)\n\n  let tick = TickMath.getTickAtSqrtRatio(sqrtRatioX96)\n  const nextTickPrice = tickToPrice(price.baseCurrency, price.quoteCurrency, tick + 1)\n  if (sorted) {\n    if (!price.lessThan(nextTickPrice)) {\n      tick++\n    }\n  } else {\n    if (!price.greaterThan(nextTickPrice)) {\n      tick++\n    }\n  }\n  return tick\n}\n","import JSBI from 'jsbi'\nimport invariant from 'tiny-invariant'\nimport { BigintIsh } from '@uniswap/sdk-core'\nimport { TickMath } from '../utils'\n\nexport interface TickConstructorArgs {\n  index: number\n  liquidityGross: BigintIsh\n  liquidityNet: BigintIsh\n}\n\nexport class Tick {\n  public readonly index: number\n  public readonly liquidityGross: JSBI\n  public readonly liquidityNet: JSBI\n\n  constructor({ index, liquidityGross, liquidityNet }: TickConstructorArgs) {\n    invariant(index >= TickMath.MIN_TICK && index <= TickMath.MAX_TICK, 'TICK')\n    this.index = index\n    this.liquidityGross = JSBI.BigInt(liquidityGross)\n    this.liquidityNet = JSBI.BigInt(liquidityNet)\n  }\n}\n","import { BigintIsh } from '@uniswap/sdk-core'\nimport { TickList } from '../utils/tickList'\nimport { Tick, TickConstructorArgs } from './tick'\nimport { TickDataProvider } from './tickDataProvider'\n\n/**\n * A data provider for ticks that is backed by an in-memory array of ticks.\n */\nexport class TickListDataProvider implements TickDataProvider {\n  private ticks: readonly Tick[]\n\n  constructor(ticks: (Tick | TickConstructorArgs)[], tickSpacing: number) {\n    const ticksMapped: Tick[] = ticks.map(t => (t instanceof Tick ? t : new Tick(t)))\n    TickList.validateList(ticksMapped, tickSpacing)\n    this.ticks = ticksMapped\n  }\n\n  async getTick(tick: number): Promise<{ liquidityNet: BigintIsh; liquidityGross: BigintIsh }> {\n    return TickList.getTick(this.ticks, tick)\n  }\n\n  async nextInitializedTickWithinOneWord(tick: number, lte: boolean, tickSpacing: number): Promise<[number, boolean]> {\n    return TickList.nextInitializedTickWithinOneWord(this.ticks, tick, lte, tickSpacing)\n  }\n}\n","import { BigintIsh, ChainId, Price, Token, CurrencyAmount } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport invariant from 'tiny-invariant'\nimport { FACTORY_ADDRESS, FeeAmount, TICK_SPACINGS } from '../constants'\nimport { NEGATIVE_ONE, ONE, Q192, ZERO } from '../internalConstants'\nimport { computePoolAddress } from '../utils/computePoolAddress'\nimport { LiquidityMath } from '../utils/liquidityMath'\nimport { SwapMath } from '../utils/swapMath'\nimport { TickMath } from '../utils/tickMath'\nimport { Tick, TickConstructorArgs } from './tick'\nimport { NoTickDataProvider, TickDataProvider } from './tickDataProvider'\nimport { TickListDataProvider } from './tickListDataProvider'\n\ninterface StepComputations {\n  sqrtPriceStartX96: JSBI\n  tickNext: number\n  initialized: boolean\n  sqrtPriceNextX96: JSBI\n  amountIn: JSBI\n  amountOut: JSBI\n  feeAmount: JSBI\n}\n\n/**\n * By default, pools will not allow operations that require ticks.\n */\nconst NO_TICK_DATA_PROVIDER_DEFAULT = new NoTickDataProvider()\n\n/**\n * Represents a V3 pool\n */\nexport class Pool {\n  public readonly token0: Token\n  public readonly token1: Token\n  public readonly fee: FeeAmount\n  public readonly sqrtRatioX96: JSBI\n  public readonly liquidity: JSBI\n  public readonly tickCurrent: number\n  public readonly tickDataProvider: TickDataProvider\n\n  private _token0Price?: Price<Token, Token>\n  private _token1Price?: Price<Token, Token>\n\n  public static getAddress(tokenA: Token, tokenB: Token, fee: FeeAmount): string {\n    return computePoolAddress({ factoryAddress: FACTORY_ADDRESS, fee, tokenA, tokenB })\n  }\n\n  /**\n   * Construct a pool\n   * @param tokenA one of the tokens in the pool\n   * @param tokenB the other token in the pool\n   * @param fee the fee in hundredths of a bips of the input amount of every swap that is collected by the pool\n   * @param sqrtRatioX96 the sqrt of the current ratio of amounts of token1 to token0\n   * @param liquidity the current value of in range liquidity\n   * @param tickCurrent the current tick of the pool\n   * @param ticks the current state of the pool ticks or a data provider that can return tick data\n   */\n  public constructor(\n    tokenA: Token,\n    tokenB: Token,\n    fee: FeeAmount,\n    sqrtRatioX96: BigintIsh,\n    liquidity: BigintIsh,\n    tickCurrent: number,\n    ticks: TickDataProvider | (Tick | TickConstructorArgs)[] = NO_TICK_DATA_PROVIDER_DEFAULT\n  ) {\n    invariant(Number.isInteger(fee) && fee < 1_000_000, 'FEE')\n\n    const tickCurrentSqrtRatioX96 = TickMath.getSqrtRatioAtTick(tickCurrent)\n    const nextTickSqrtRatioX96 = TickMath.getSqrtRatioAtTick(tickCurrent + 1)\n    invariant(\n      JSBI.greaterThanOrEqual(JSBI.BigInt(sqrtRatioX96), tickCurrentSqrtRatioX96) &&\n        JSBI.lessThanOrEqual(JSBI.BigInt(sqrtRatioX96), nextTickSqrtRatioX96),\n      'PRICE_BOUNDS'\n    )\n    // always create a copy of the list since we want the pool's tick list to be immutable\n    ;[this.token0, this.token1] = tokenA.sortsBefore(tokenB) ? [tokenA, tokenB] : [tokenB, tokenA]\n    this.fee = fee\n    this.sqrtRatioX96 = JSBI.BigInt(sqrtRatioX96)\n    this.liquidity = JSBI.BigInt(liquidity)\n    this.tickCurrent = tickCurrent\n    this.tickDataProvider = Array.isArray(ticks) ? new TickListDataProvider(ticks, TICK_SPACINGS[fee]) : ticks\n  }\n\n  /**\n   * Returns true if the token is either token0 or token1\n   * @param token to check\n   */\n  public involvesToken(token: Token): boolean {\n    return token.equals(this.token0) || token.equals(this.token1)\n  }\n\n  /**\n   * Returns the current mid price of the pool in terms of token0, i.e. the ratio of token1 over token0\n   */\n  public get token0Price(): Price<Token, Token> {\n    return (\n      this._token0Price ??\n      (this._token0Price = new Price(\n        this.token0,\n        this.token1,\n        Q192,\n        JSBI.multiply(this.sqrtRatioX96, this.sqrtRatioX96)\n      ))\n    )\n  }\n\n  /**\n   * Returns the current mid price of the pool in terms of token1, i.e. the ratio of token0 over token1\n   */\n  public get token1Price(): Price<Token, Token> {\n    return (\n      this._token1Price ??\n      (this._token1Price = new Price(\n        this.token1,\n        this.token0,\n        JSBI.multiply(this.sqrtRatioX96, this.sqrtRatioX96),\n        Q192\n      ))\n    )\n  }\n\n  /**\n   * Return the price of the given token in terms of the other token in the pool.\n   * @param token token to return price of\n   */\n  public priceOf(token: Token): Price<Token, Token> {\n    invariant(this.involvesToken(token), 'TOKEN')\n    return token.equals(this.token0) ? this.token0Price : this.token1Price\n  }\n\n  /**\n   * Returns the chain ID of the tokens in the pool.\n   */\n  public get chainId(): ChainId | number {\n    return this.token0.chainId\n  }\n\n  /**\n   * Given an input amount of a token, return the computed output amount and a pool with state updated after the trade\n   * @param inputAmount the input amount for which to quote the output amount\n   */\n  public async getOutputAmount(\n    inputAmount: CurrencyAmount<Token>,\n    sqrtPriceLimitX96?: JSBI\n  ): Promise<[CurrencyAmount<Token>, Pool]> {\n    invariant(this.involvesToken(inputAmount.currency), 'TOKEN')\n\n    const zeroForOne = inputAmount.currency.equals(this.token0)\n\n    const { amountCalculated: outputAmount, sqrtRatioX96, liquidity, tickCurrent } = await this.swap(\n      zeroForOne,\n      inputAmount.quotient,\n      sqrtPriceLimitX96\n    )\n    const outputToken = zeroForOne ? this.token1 : this.token0\n    return [\n      CurrencyAmount.fromRawAmount(outputToken, JSBI.multiply(outputAmount, NEGATIVE_ONE)),\n      new Pool(this.token0, this.token1, this.fee, sqrtRatioX96, liquidity, tickCurrent, this.tickDataProvider)\n    ]\n  }\n\n  /**\n   * Given a desired output amount of a token, return the computed input amount and a pool with state updated after the trade\n   * @param outputAmount the output amount for which to quote the input amount\n   */\n  public async getInputAmount(\n    outputAmount: CurrencyAmount<Token>,\n    sqrtPriceLimitX96?: JSBI\n  ): Promise<[CurrencyAmount<Token>, Pool]> {\n    invariant(outputAmount.currency.isToken && this.involvesToken(outputAmount.currency), 'TOKEN')\n\n    const zeroForOne = outputAmount.currency.equals(this.token1)\n\n    const { amountCalculated: inputAmount, sqrtRatioX96, liquidity, tickCurrent } = await this.swap(\n      zeroForOne,\n      JSBI.multiply(outputAmount.quotient, NEGATIVE_ONE),\n      sqrtPriceLimitX96\n    )\n    const inputToken = zeroForOne ? this.token0 : this.token1\n    return [\n      CurrencyAmount.fromRawAmount(inputToken, inputAmount),\n      new Pool(this.token0, this.token1, this.fee, sqrtRatioX96, liquidity, tickCurrent, this.tickDataProvider)\n    ]\n  }\n\n  private async swap(\n    zeroForOne: boolean,\n    amountSpecified: JSBI,\n    sqrtPriceLimitX96?: JSBI\n  ): Promise<{ amountCalculated: JSBI; sqrtRatioX96: JSBI; liquidity: JSBI; tickCurrent: number }> {\n    if (!sqrtPriceLimitX96)\n      sqrtPriceLimitX96 = zeroForOne\n        ? JSBI.add(TickMath.MIN_SQRT_RATIO, ONE)\n        : JSBI.subtract(TickMath.MAX_SQRT_RATIO, ONE)\n\n    if (zeroForOne) {\n      invariant(JSBI.greaterThan(sqrtPriceLimitX96, TickMath.MIN_SQRT_RATIO), 'RATIO_MIN')\n      invariant(JSBI.lessThan(sqrtPriceLimitX96, this.sqrtRatioX96), 'RATIO_CURRENT')\n    } else {\n      invariant(JSBI.lessThan(sqrtPriceLimitX96, TickMath.MAX_SQRT_RATIO), 'RATIO_MAX')\n      invariant(JSBI.greaterThan(sqrtPriceLimitX96, this.sqrtRatioX96), 'RATIO_CURRENT')\n    }\n\n    const exactInput = JSBI.greaterThanOrEqual(amountSpecified, ZERO)\n\n    // keep track of swap state\n    const state = {\n      amountSpecifiedRemaining: amountSpecified,\n      amountCalculated: ZERO,\n      sqrtPriceX96: this.sqrtRatioX96,\n      tick: this.tickCurrent,\n      liquidity: this.liquidity\n    }\n\n    // start swap while loop\n    while (JSBI.notEqual(state.amountSpecifiedRemaining, ZERO) && state.sqrtPriceX96 != sqrtPriceLimitX96) {\n      let step: Partial<StepComputations> = {}\n      step.sqrtPriceStartX96 = state.sqrtPriceX96\n\n      // because each iteration of the while loop rounds, we can't optimize this code (relative to the smart contract)\n      // by simply traversing to the next available tick, we instead need to exactly replicate\n      // tickBitmap.nextInitializedTickWithinOneWord\n      ;[step.tickNext, step.initialized] = await this.tickDataProvider.nextInitializedTickWithinOneWord(\n        state.tick,\n        zeroForOne,\n        this.tickSpacing\n      )\n\n      if (step.tickNext < TickMath.MIN_TICK) {\n        step.tickNext = TickMath.MIN_TICK\n      } else if (step.tickNext > TickMath.MAX_TICK) {\n        step.tickNext = TickMath.MAX_TICK\n      }\n\n      step.sqrtPriceNextX96 = TickMath.getSqrtRatioAtTick(step.tickNext)\n      ;[state.sqrtPriceX96, step.amountIn, step.amountOut, step.feeAmount] = SwapMath.computeSwapStep(\n        state.sqrtPriceX96,\n        (zeroForOne\n        ? JSBI.lessThan(step.sqrtPriceNextX96, sqrtPriceLimitX96)\n        : JSBI.greaterThan(step.sqrtPriceNextX96, sqrtPriceLimitX96))\n          ? sqrtPriceLimitX96\n          : step.sqrtPriceNextX96,\n        state.liquidity,\n        state.amountSpecifiedRemaining,\n        this.fee\n      )\n\n      if (exactInput) {\n        state.amountSpecifiedRemaining = JSBI.subtract(\n          state.amountSpecifiedRemaining,\n          JSBI.add(step.amountIn, step.feeAmount)\n        )\n        state.amountCalculated = JSBI.subtract(state.amountCalculated, step.amountOut)\n      } else {\n        state.amountSpecifiedRemaining = JSBI.add(state.amountSpecifiedRemaining, step.amountOut)\n        state.amountCalculated = JSBI.add(state.amountCalculated, JSBI.add(step.amountIn, step.feeAmount))\n      }\n\n      // TODO\n      if (JSBI.equal(state.sqrtPriceX96, step.sqrtPriceNextX96)) {\n        // if the tick is initialized, run the tick transition\n        if (step.initialized) {\n          let liquidityNet = JSBI.BigInt((await this.tickDataProvider.getTick(step.tickNext)).liquidityNet)\n          // if we're moving leftward, we interpret liquidityNet as the opposite sign\n          // safe because liquidityNet cannot be type(int128).min\n          if (zeroForOne) liquidityNet = JSBI.multiply(liquidityNet, NEGATIVE_ONE)\n\n          state.liquidity = LiquidityMath.addDelta(state.liquidity, liquidityNet)\n        }\n\n        state.tick = zeroForOne ? step.tickNext - 1 : step.tickNext\n      } else if (state.sqrtPriceX96 != step.sqrtPriceStartX96) {\n        // recompute unless we're on a lower tick boundary (i.e. already transitioned ticks), and haven't moved\n        state.tick = TickMath.getTickAtSqrtRatio(state.sqrtPriceX96)\n      }\n    }\n\n    return {\n      amountCalculated: state.amountCalculated,\n      sqrtRatioX96: state.sqrtPriceX96,\n      liquidity: state.liquidity,\n      tickCurrent: state.tick\n    }\n  }\n\n  public get tickSpacing(): number {\n    return TICK_SPACINGS[this.fee]\n  }\n}\n","import { BigintIsh, MaxUint256, Percent, Price, CurrencyAmount, Token } from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport invariant from 'tiny-invariant'\nimport { ZERO } from '../internalConstants'\nimport { maxLiquidityForAmounts } from '../utils/maxLiquidityForAmounts'\nimport { tickToPrice } from '../utils/priceTickConversions'\nimport { SqrtPriceMath } from '../utils/sqrtPriceMath'\nimport { TickMath } from '../utils/tickMath'\nimport { encodeSqrtRatioX96 } from '../utils/encodeSqrtRatioX96'\nimport { Pool } from './pool'\n\ninterface PositionConstructorArgs {\n  pool: Pool\n  tickLower: number\n  tickUpper: number\n  liquidity: BigintIsh\n}\n\n/**\n * Represents a position on a Uniswap V3 Pool\n */\nexport class Position {\n  public readonly pool: Pool\n  public readonly tickLower: number\n  public readonly tickUpper: number\n  public readonly liquidity: JSBI\n\n  // cached resuts for the getters\n  private _token0Amount: CurrencyAmount<Token> | null = null\n  private _token1Amount: CurrencyAmount<Token> | null = null\n  private _mintAmounts: Readonly<{ amount0: JSBI; amount1: JSBI }> | null = null\n\n  /**\n   * Constructs a position for a given pool with the given liquidity\n   * @param pool for which pool the liquidity is assigned\n   * @param liquidity the amount of liquidity that is in the position\n   * @param tickLower the lower tick of the position\n   * @param tickUpper the upper tick of the position\n   */\n  public constructor({ pool, liquidity, tickLower, tickUpper }: PositionConstructorArgs) {\n    invariant(tickLower < tickUpper, 'TICK_ORDER')\n    invariant(tickLower >= TickMath.MIN_TICK && tickLower % pool.tickSpacing === 0, 'TICK_LOWER')\n    invariant(tickUpper <= TickMath.MAX_TICK && tickUpper % pool.tickSpacing === 0, 'TICK_UPPER')\n\n    this.pool = pool\n    this.tickLower = tickLower\n    this.tickUpper = tickUpper\n    this.liquidity = JSBI.BigInt(liquidity)\n  }\n\n  /**\n   * Returns the price of token0 at the lower tick\n   */\n  public get token0PriceLower(): Price<Token, Token> {\n    return tickToPrice(this.pool.token0, this.pool.token1, this.tickLower)\n  }\n\n  /**\n   * Returns the price of token0 at the upper tick\n   */\n  public get token0PriceUpper(): Price<Token, Token> {\n    return tickToPrice(this.pool.token0, this.pool.token1, this.tickUpper)\n  }\n\n  /**\n   * Returns the amount of token0 that this position's liquidity could be burned for at the current pool price\n   */\n  public get amount0(): CurrencyAmount<Token> {\n    if (this._token0Amount === null) {\n      if (this.pool.tickCurrent < this.tickLower) {\n        this._token0Amount = CurrencyAmount.fromRawAmount(\n          this.pool.token0,\n          SqrtPriceMath.getAmount0Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            false\n          )\n        )\n      } else if (this.pool.tickCurrent < this.tickUpper) {\n        this._token0Amount = CurrencyAmount.fromRawAmount(\n          this.pool.token0,\n          SqrtPriceMath.getAmount0Delta(\n            this.pool.sqrtRatioX96,\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            false\n          )\n        )\n      } else {\n        this._token0Amount = CurrencyAmount.fromRawAmount(this.pool.token0, ZERO)\n      }\n    }\n    return this._token0Amount\n  }\n\n  /**\n   * Returns the amount of token1 that this position's liquidity could be burned for at the current pool price\n   */\n  public get amount1(): CurrencyAmount<Token> {\n    if (this._token1Amount === null) {\n      if (this.pool.tickCurrent < this.tickLower) {\n        this._token1Amount = CurrencyAmount.fromRawAmount(this.pool.token1, ZERO)\n      } else if (this.pool.tickCurrent < this.tickUpper) {\n        this._token1Amount = CurrencyAmount.fromRawAmount(\n          this.pool.token1,\n          SqrtPriceMath.getAmount1Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            this.pool.sqrtRatioX96,\n            this.liquidity,\n            false\n          )\n        )\n      } else {\n        this._token1Amount = CurrencyAmount.fromRawAmount(\n          this.pool.token1,\n          SqrtPriceMath.getAmount1Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            false\n          )\n        )\n      }\n    }\n    return this._token1Amount\n  }\n\n  /**\n   * Returns the lower and upper sqrt ratios if the price 'slips' up to slippage tolerance percentage\n   * @param slippageTolerance amount by which the price can 'slip'\n   * @private\n   */\n  private ratiosAfterSlippage(slippageTolerance: Percent): { sqrtRatioX96Lower: JSBI; sqrtRatioX96Upper: JSBI } {\n    const priceLower = this.pool.token0Price.asFraction.multiply(new Percent(1).subtract(slippageTolerance))\n    const priceUpper = this.pool.token0Price.asFraction.multiply(slippageTolerance.add(1))\n    let sqrtRatioX96Lower = encodeSqrtRatioX96(priceLower.numerator, priceLower.denominator)\n    if (JSBI.lessThanOrEqual(sqrtRatioX96Lower, TickMath.MIN_SQRT_RATIO)) {\n      sqrtRatioX96Lower = JSBI.add(TickMath.MIN_SQRT_RATIO, JSBI.BigInt(1))\n    }\n    let sqrtRatioX96Upper = encodeSqrtRatioX96(priceUpper.numerator, priceUpper.denominator)\n    if (JSBI.greaterThanOrEqual(sqrtRatioX96Upper, TickMath.MAX_SQRT_RATIO)) {\n      sqrtRatioX96Upper = JSBI.subtract(TickMath.MAX_SQRT_RATIO, JSBI.BigInt(1))\n    }\n    return {\n      sqrtRatioX96Lower,\n      sqrtRatioX96Upper\n    }\n  }\n\n  /**\n   * Returns the minimum amounts that must be sent in order to safely mint the amount of liquidity held by the position\n   * with the given slippage tolerance\n   * @param slippageTolerance tolerance of unfavorable slippage from the current price\n   */\n  public mintAmountsWithSlippage(slippageTolerance: Percent): Readonly<{ amount0: JSBI; amount1: JSBI }> {\n    // get lower/upper prices\n    const { sqrtRatioX96Upper, sqrtRatioX96Lower } = this.ratiosAfterSlippage(slippageTolerance)\n\n    // construct counterfactual pools\n    const poolLower = new Pool(\n      this.pool.token0,\n      this.pool.token1,\n      this.pool.fee,\n      sqrtRatioX96Lower,\n      0 /* liquidity doesn't matter */,\n      TickMath.getTickAtSqrtRatio(sqrtRatioX96Lower)\n    )\n    const poolUpper = new Pool(\n      this.pool.token0,\n      this.pool.token1,\n      this.pool.fee,\n      sqrtRatioX96Upper,\n      0 /* liquidity doesn't matter */,\n      TickMath.getTickAtSqrtRatio(sqrtRatioX96Upper)\n    )\n\n    // because the router is imprecise, we need to calculate the position that will be created (assuming no slippage)\n    const positionThatWillBeCreated = Position.fromAmounts({\n      pool: this.pool,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper,\n      ...this.mintAmounts, // the mint amounts are what will be passed as calldata\n      useFullPrecision: false\n    })\n\n    // we want the smaller amounts...\n    // ...which occurs at the upper price for amount0...\n    const { amount0 } = new Position({\n      pool: poolUpper,\n      liquidity: positionThatWillBeCreated.liquidity,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper\n    }).mintAmounts\n    // ...and the lower for amount1\n    const { amount1 } = new Position({\n      pool: poolLower,\n      liquidity: positionThatWillBeCreated.liquidity,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper\n    }).mintAmounts\n\n    return { amount0, amount1 }\n  }\n\n  /**\n   * Returns the minimum amounts that should be requested in order to safely burn the amount of liquidity held by the\n   * position with the given slippage tolerance\n   * @param slippageTolerance tolerance of unfavorable slippage from the current price\n   */\n  public burnAmountsWithSlippage(slippageTolerance: Percent): Readonly<{ amount0: JSBI; amount1: JSBI }> {\n    // get lower/upper prices\n    const { sqrtRatioX96Upper, sqrtRatioX96Lower } = this.ratiosAfterSlippage(slippageTolerance)\n\n    // construct counterfactual pools\n    const poolLower = new Pool(\n      this.pool.token0,\n      this.pool.token1,\n      this.pool.fee,\n      sqrtRatioX96Lower,\n      0 /* liquidity doesn't matter */,\n      TickMath.getTickAtSqrtRatio(sqrtRatioX96Lower)\n    )\n    const poolUpper = new Pool(\n      this.pool.token0,\n      this.pool.token1,\n      this.pool.fee,\n      sqrtRatioX96Upper,\n      0 /* liquidity doesn't matter */,\n      TickMath.getTickAtSqrtRatio(sqrtRatioX96Upper)\n    )\n\n    // we want the smaller amounts...\n    // ...which occurs at the upper price for amount0...\n    const amount0 = new Position({\n      pool: poolUpper,\n      liquidity: this.liquidity,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper\n    }).amount0\n    // ...and the lower for amount1\n    const amount1 = new Position({\n      pool: poolLower,\n      liquidity: this.liquidity,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper\n    }).amount1\n\n    return { amount0: amount0.quotient, amount1: amount1.quotient }\n  }\n\n  /**\n   * Returns the minimum amounts that must be sent in order to mint the amount of liquidity held by the position at\n   * the current price for the pool\n   */\n  public get mintAmounts(): Readonly<{ amount0: JSBI; amount1: JSBI }> {\n    if (this._mintAmounts === null) {\n      if (this.pool.tickCurrent < this.tickLower) {\n        return {\n          amount0: SqrtPriceMath.getAmount0Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            true\n          ),\n          amount1: ZERO\n        }\n      } else if (this.pool.tickCurrent < this.tickUpper) {\n        return {\n          amount0: SqrtPriceMath.getAmount0Delta(\n            this.pool.sqrtRatioX96,\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            true\n          ),\n          amount1: SqrtPriceMath.getAmount1Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            this.pool.sqrtRatioX96,\n            this.liquidity,\n            true\n          )\n        }\n      } else {\n        return {\n          amount0: ZERO,\n          amount1: SqrtPriceMath.getAmount1Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            true\n          )\n        }\n      }\n    }\n    return this._mintAmounts\n  }\n\n  /**\n   * Computes the maximum amount of liquidity received for a given amount of token0, token1,\n   * and the prices at the tick boundaries.\n   * @param pool the pool for which the position should be created\n   * @param tickLower the lower tick of the position\n   * @param tickUpper the upper tick of the position\n   * @param amount0 token0 amount\n   * @param amount1 token1 amount\n   * @param useFullPrecision if false, liquidity will be maximized according to what the router can calculate,\n   * not what core can theoretically support\n   */\n  public static fromAmounts({\n    pool,\n    tickLower,\n    tickUpper,\n    amount0,\n    amount1,\n    useFullPrecision\n  }: {\n    pool: Pool\n    tickLower: number\n    tickUpper: number\n    amount0: BigintIsh\n    amount1: BigintIsh\n    useFullPrecision: boolean\n  }) {\n    const sqrtRatioAX96 = TickMath.getSqrtRatioAtTick(tickLower)\n    const sqrtRatioBX96 = TickMath.getSqrtRatioAtTick(tickUpper)\n    return new Position({\n      pool,\n      tickLower,\n      tickUpper,\n      liquidity: maxLiquidityForAmounts(\n        pool.sqrtRatioX96,\n        sqrtRatioAX96,\n        sqrtRatioBX96,\n        amount0,\n        amount1,\n        useFullPrecision\n      )\n    })\n  }\n\n  /**\n   * Computes a position with the maximum amount of liquidity received for a given amount of token0, assuming an unlimited amount of token1\n   * @param pool the pool for which the position is created\n   * @param tickLower the lower tick\n   * @param tickUpper the upper tick\n   * @param amount0 the desired amount of token0\n   * @param useFullPrecision if true, liquidity will be maximized according to what the router can calculate,\n   * not what core can theoretically support\n   */\n  public static fromAmount0({\n    pool,\n    tickLower,\n    tickUpper,\n    amount0,\n    useFullPrecision\n  }: {\n    pool: Pool\n    tickLower: number\n    tickUpper: number\n    amount0: BigintIsh\n    useFullPrecision: boolean\n  }) {\n    return Position.fromAmounts({ pool, tickLower, tickUpper, amount0, amount1: MaxUint256, useFullPrecision })\n  }\n\n  /**\n   * Computes a position with the maximum amount of liquidity received for a given amount of token1, assuming an unlimited amount of token0\n   * @param pool the pool for which the position is created\n   * @param tickLower the lower tick\n   * @param tickUpper the upper tick\n   * @param amount1 the desired amount of token1\n   */\n  public static fromAmount1({\n    pool,\n    tickLower,\n    tickUpper,\n    amount1\n  }: {\n    pool: Pool\n    tickLower: number\n    tickUpper: number\n    amount1: BigintIsh\n  }) {\n    // this function always uses full precision,\n    return Position.fromAmounts({ pool, tickLower, tickUpper, amount0: MaxUint256, amount1, useFullPrecision: true })\n  }\n}\n","import invariant from 'tiny-invariant'\n\nimport { ChainId, Currency, Price, Token ,WETH9} from '@uniswap/sdk-core'\nimport { Pool } from './pool'\n\nfunction wrappedCurrency(currency: Currency, chainId: ChainId): Token {\n  if (currency.isToken) {\n    // invariant(currency.chainId === chainId, 'CHAIN_ID')\n    return currency\n  }\n  if (chainId === 210000) {\n    const WJU = new Token(210000, '0x4d1b49b424afd7075d3c063addf97d5575e1c7e2', 18, 'WJU', 'Wrapped JU')\n    return WJU\n  }\n  if (currency.isEther) return WETH9[chainId]\n  throw new Error('CURRENCY')\n}\n/**\n * Represents a list of pools through which a swap can occur\n */\nexport class Route<TInput extends Currency, TOutput extends Currency> {\n  public readonly pools: Pool[]\n  public readonly tokenPath: Token[]\n  public readonly input: TInput\n  public readonly output: TOutput\n\n  private _midPrice: Price<TInput, TOutput> | null = null\n\n  public constructor(pools: Pool[], input: TInput, output: TOutput) {\n    invariant(pools.length > 0, 'POOLS')\n\n    const chainId = pools[0].chainId\n    const allOnSameChain = pools.every(pool => pool.chainId === chainId)\n    invariant(allOnSameChain, 'CHAIN_IDS')\n\n    const wrappedInput = wrappedCurrency(input, chainId)\n    invariant(pools[0].involvesToken(wrappedInput), 'INPUT')\n\n    invariant(pools[pools.length - 1].involvesToken(wrappedCurrency(output, chainId)), 'OUTPUT')\n\n    /**\n     * Normalizes token0-token1 order and selects the next token/fee step to add to the path\n     * */\n    const tokenPath: Token[] = [wrappedInput]\n    for (const [i, pool] of pools.entries()) {\n      const currentInputToken = tokenPath[i]\n      invariant(currentInputToken.equals(pool.token0) || currentInputToken.equals(pool.token1), 'PATH')\n      const nextToken = currentInputToken.equals(pool.token0) ? pool.token1 : pool.token0\n      tokenPath.push(nextToken)\n    }\n\n    this.pools = pools\n    this.tokenPath = tokenPath\n    this.input = input\n    this.output = output ?? tokenPath[tokenPath.length - 1]\n  }\n\n  public get chainId(): ChainId | number {\n    return this.pools[0].chainId\n  }\n\n  /**\n   * Returns the token representation of the input currency. If the input currency is Ether, returns the wrapped ether token.\n   */\n  public get inputToken(): Token {\n    return wrappedCurrency(this.input, this.chainId)\n  }\n\n  /**\n   * Returns the token representation of the output currency. If the output currency is Ether, returns the wrapped ether token.\n   */\n  public get outputToken(): Token {\n    return wrappedCurrency(this.output, this.chainId)\n  }\n\n  /**\n   * Returns the mid price of the route\n   */\n  public get midPrice(): Price<TInput, TOutput> {\n    if (this._midPrice !== null) return this._midPrice\n\n    const price = this.pools.slice(1).reduce(\n      ({ nextInput, price }, pool) => {\n        return nextInput.equals(pool.token0)\n          ? {\n              nextInput: pool.token1,\n              price: price.multiply(pool.token0Price)\n            }\n          : {\n              nextInput: pool.token0,\n              price: price.multiply(pool.token1Price)\n            }\n      },\n      this.pools[0].token0.equals(this.inputToken)\n        ? {\n            nextInput: this.pools[0].token1,\n            price: this.pools[0].token0Price\n          }\n        : {\n            nextInput: this.pools[0].token0,\n            price: this.pools[0].token1Price\n          }\n    ).price\n\n    return (this._midPrice = new Price(this.input, this.output, price.denominator, price.numerator))\n  }\n}\n","import {\r\n  ChainId,\r\n  Currency,\r\n  currencyEquals,\r\n  Fraction,\r\n  Percent,\r\n  Price,\r\n  sortedInsert,\r\n  CurrencyAmount,\r\n  TradeType,\r\n  wrappedCurrencyAmount,\r\n  Token,\r\n  computePriceImpact, WETH9\r\n} from '@uniswap/sdk-core'\r\nimport invariant from 'tiny-invariant'\r\n// import { ONE } from '../internalConstants'\r\nimport { Pool } from './pool'\r\nimport { Route } from './route'\r\n\r\nfunction wrappedCurrency(currency: Currency, chainId: ChainId): Token {\r\n  if (currency.isToken) {\r\n    // invariant(currency.chainId === chainId, 'CHAIN_ID')\r\n    return currency\r\n  }\r\n  if (chainId === 210000) {\r\n    const WJU = new Token(210000, '0x4d1b49b424afd7075d3c063addf97d5575e1c7e2', 18, 'WJU', 'Wrapped JU')\r\n    return WJU\r\n  }\r\n  if (currency.isEther) return WETH9[chainId]\r\n  throw new Error('CURRENCY')\r\n}\r\n\r\n// extension of the input output comparator that also considers other dimensions of the trade in ranking them\r\nexport function tradeComparator<TInput extends Currency, TOutput extends Currency, TTradeType extends TradeType>(\r\n  a: Trade<TInput, TOutput, TTradeType>,\r\n  b: Trade<TInput, TOutput, TTradeType>\r\n) {\r\n  // must have same input and output token for comparison\r\n  invariant(currencyEquals(a.inputAmount.currency, b.inputAmount.currency), 'INPUT_CURRENCY')\r\n  invariant(currencyEquals(a.outputAmount.currency, b.outputAmount.currency), 'OUTPUT_CURRENCY')\r\n  if (a.outputAmount.equalTo(b.outputAmount)) {\r\n    if (a.inputAmount.equalTo(b.inputAmount)) {\r\n      // consider the number of hops since each hop costs gas\r\n      return a.route.tokenPath.length - b.route.tokenPath.length\r\n    }\r\n    // trade A requires less input than trade B, so A should come first\r\n    if (a.inputAmount.lessThan(b.inputAmount)) {\r\n      return -1\r\n    } else {\r\n      return 1\r\n    }\r\n  } else {\r\n    // tradeA has less output than trade B, so should come second\r\n    if (a.outputAmount.lessThan(b.outputAmount)) {\r\n      return 1\r\n    } else {\r\n      return -1\r\n    }\r\n  }\r\n}\r\n\r\nexport interface BestTradeOptions {\r\n  // how many results to return\r\n  maxNumResults?: number\r\n  // the maximum number of hops a trade should contain\r\n  maxHops?: number\r\n}\r\n\r\n/**\r\n * Represents a trade executed against a list of pools.\r\n * Does not account for slippage, i.e. trades that front run this trade and move the price.\r\n */\r\nexport class Trade<TInput extends Currency, TOutput extends Currency, TTradeType extends TradeType> {\r\n  /**\r\n   * The route of the trade, i.e. which pools the trade goes through.\r\n   */\r\n  public readonly route: Route<TInput, TOutput>\r\n  /**\r\n   * The type of the trade, either exact in or exact out.\r\n   */\r\n  public readonly tradeType: TTradeType\r\n  /**\r\n   * The input amount for the trade assuming no slippage.\r\n   */\r\n  public readonly inputAmount: CurrencyAmount<TInput>\r\n  /**\r\n   * The output amount for the trade assuming no slippage.\r\n   */\r\n  public readonly outputAmount: CurrencyAmount<TOutput>\r\n\r\n  /**\r\n   * The cached result of the computed execution price\r\n   * @private\r\n   */\r\n  private _executionPrice: Price<TInput, TOutput> | undefined\r\n  /**\r\n   * The price expressed in terms of output amount/input amount.\r\n   */\r\n  public get executionPrice(): Price<TInput, TOutput> {\r\n    return (\r\n      this._executionPrice ??\r\n      (this._executionPrice = new Price(\r\n        this.inputAmount.currency,\r\n        this.outputAmount.currency,\r\n        this.inputAmount.quotient,\r\n        this.outputAmount.quotient\r\n      ))\r\n    )\r\n  }\r\n\r\n  /**\r\n   * The cached result of the price impact computation\r\n   * @private\r\n   */\r\n  private _priceImpact: Percent | undefined\r\n\r\n  /**\r\n   * Returns the percent difference between the route's mid price and the price impact\r\n   */\r\n  public get priceImpact(): Percent {\r\n    return (\r\n      this._priceImpact ??\r\n      (this._priceImpact = computePriceImpact(this.route.midPrice, this.inputAmount, this.outputAmount))\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Constructs an exact in trade with the given amount in and route\r\n   * @param route route of the exact in trade\r\n   * @param amountIn the amount being passed in\r\n   */\r\n  public static async exactIn<TInput extends Currency, TOutput extends Currency>(\r\n    route: Route<TInput, TOutput>,\r\n    amountIn: CurrencyAmount<TInput>\r\n  ): Promise<Trade<TInput, TOutput, TradeType.EXACT_INPUT>> {\r\n    return Trade.fromRoute(route, amountIn, TradeType.EXACT_INPUT)\r\n  }\r\n\r\n  /**\r\n   * Constructs an exact out trade with the given amount out and route\r\n   * @param route route of the exact out trade\r\n   * @param amountOut the amount returned by the trade\r\n   */\r\n  public static async exactOut<TInput extends Currency, TOutput extends Currency>(\r\n    route: Route<TInput, TOutput>,\r\n    amountOut: CurrencyAmount<TOutput>\r\n  ): Promise<Trade<TInput, TOutput, TradeType.EXACT_OUTPUT>> {\r\n    return Trade.fromRoute(route, amountOut, TradeType.EXACT_OUTPUT)\r\n  }\r\n\r\n  /**\r\n   * Constructs a trade by simulating swaps through the given route\r\n   * @param route route to swap through\r\n   * @param amount the amount specified, either input or output, depending on tradeType\r\n   * @param tradeType whether the trade is an exact input or exact output swap\r\n   */\r\n  public static async fromRoute<TInput extends Currency, TOutput extends Currency, TTradeType extends TradeType>(\r\n    route: Route<TInput, TOutput>,\r\n    amount: TTradeType extends TradeType.EXACT_INPUT ? CurrencyAmount<TInput> : CurrencyAmount<TOutput>,\r\n    tradeType: TTradeType\r\n  ): Promise<Trade<TInput, TOutput, TTradeType>> {\r\n    const amounts: CurrencyAmount<Token>[] = new Array(route.tokenPath.length)\r\n    let inputAmount: CurrencyAmount<TInput>\r\n    let outputAmount: CurrencyAmount<TOutput>\r\n    if (tradeType === TradeType.EXACT_INPUT) {\r\n      invariant(currencyEquals(amount.currency, route.input), 'INPUT')\r\n      amounts[0] = wrappedCurrencyAmount(amount, route.chainId)\r\n      for (let i = 0; i < route.tokenPath.length - 1; i++) {\r\n        const pool = route.pools[i]\r\n        const [outputAmount] = await pool.getOutputAmount(amounts[i])\r\n        amounts[i + 1] = outputAmount\r\n      }\r\n      inputAmount = CurrencyAmount.fromFractionalAmount(route.input, amount.numerator, amount.denominator)\r\n      outputAmount = CurrencyAmount.fromFractionalAmount(\r\n        route.output,\r\n        amounts[amounts.length - 1].numerator,\r\n        amounts[amounts.length - 1].denominator\r\n      )\r\n    } else {\r\n      invariant(currencyEquals(amount.currency, route.output), 'OUTPUT')\r\n      amounts[amounts.length - 1] = wrappedCurrencyAmount(amount, route.chainId)\r\n      for (let i = route.tokenPath.length - 1; i > 0; i--) {\r\n        const pool = route.pools[i - 1]\r\n        const [inputAmount] = await pool.getInputAmount(amounts[i])\r\n        amounts[i - 1] = inputAmount\r\n      }\r\n      inputAmount = CurrencyAmount.fromFractionalAmount(route.input, amounts[0].numerator, amounts[0].denominator)\r\n      outputAmount = CurrencyAmount.fromFractionalAmount(route.output, amount.numerator, amount.denominator)\r\n    }\r\n\r\n    return new Trade({\r\n      route,\r\n      tradeType,\r\n      inputAmount,\r\n      outputAmount\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Creates a trade without computing the result of swapping through the route. Useful when you have simulated the trade\r\n   * elsewhere and do not have any tick data\r\n   * @param constructorArguments the arguments passed to the trade constructor\r\n   */\r\n  public static createUncheckedTrade<\r\n    TInput extends Currency,\r\n    TOutput extends Currency,\r\n    TTradeType extends TradeType\r\n  >(constructorArguments: {\r\n    route: Route<TInput, TOutput>\r\n    inputAmount: CurrencyAmount<TInput>\r\n    outputAmount: CurrencyAmount<TOutput>\r\n    tradeType: TTradeType\r\n  }): Trade<TInput, TOutput, TTradeType> {\r\n    return new Trade(constructorArguments)\r\n  }\r\n\r\n  /**\r\n   * Construct a trade by passing in the pre-computed property values\r\n   * @param route the route through which the trade occurs\r\n   * @param inputAmount the amount of input paid in the trade\r\n   * @param outputAmount the amount of output received in the trade\r\n   * @param tradeType the type of trade, exact input or exact output\r\n   */\r\n  private constructor({\r\n    route,\r\n    inputAmount,\r\n    outputAmount,\r\n    tradeType\r\n  }: {\r\n    route: Route<TInput, TOutput>\r\n    inputAmount: CurrencyAmount<TInput>\r\n    outputAmount: CurrencyAmount<TOutput>\r\n    tradeType: TTradeType\r\n  }) {\r\n    invariant(currencyEquals(inputAmount.currency, route.input), 'INPUT_CURRENCY_MATCH')\r\n    invariant(currencyEquals(outputAmount.currency, route.output), 'OUTPUT_CURRENCY_MATCH')\r\n    this.route = route\r\n    this.inputAmount = inputAmount\r\n    this.outputAmount = outputAmount\r\n    this.tradeType = tradeType\r\n  }\r\n\r\n  /**\r\n   * Get the minimum amount that must be received from this trade for the given slippage tolerance\r\n   * @param slippageTolerance tolerance of unfavorable slippage from the execution price of this trade\r\n   */\r\n  public minimumAmountOut(slippageTolerance: Percent): CurrencyAmount<TOutput> {\r\n    invariant(!slippageTolerance.lessThan(\"0\"), 'SLIPPAGE_TOLERANCE')\r\n    if (this.tradeType === TradeType.EXACT_OUTPUT) {\r\n      return this.outputAmount\r\n    } else {\r\n      console.log(\"this.outputAmount.quotient\",this.outputAmount.quotient)\r\n      let q = new Fraction(\"1\")\r\n      try{\r\n        q = new Fraction(this.outputAmount.quotient)\r\n      }catch(e){\r\n        console.error(e)\r\n      }\r\n\r\n      const slippageAdjustedAmountOut = new Fraction(\"1\")\r\n        .add(slippageTolerance)\r\n        .invert()\r\n        .multiply(q).quotient\r\n      return CurrencyAmount.fromRawAmount(this.outputAmount.currency, slippageAdjustedAmountOut)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the maximum amount in that can be spent via this trade for the given slippage tolerance\r\n   * @param slippageTolerance tolerance of unfavorable slippage from the execution price of this trade\r\n   */\r\n  public maximumAmountIn(slippageTolerance: Percent): CurrencyAmount<TInput> {\r\n    invariant(!slippageTolerance.lessThan(\"0\"), 'SLIPPAGE_TOLERANCE')\r\n    if (this.tradeType === TradeType.EXACT_INPUT) {\r\n      return this.inputAmount\r\n    } else {\r\n      const slippageAdjustedAmountIn = new Fraction(\"1\").add(slippageTolerance).multiply(this.inputAmount.quotient)\r\n        .quotient\r\n      return CurrencyAmount.fromRawAmount(this.inputAmount.currency, slippageAdjustedAmountIn)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the execution price after accounting for slippage tolerance\r\n   * @param slippageTolerance the allowed tolerated slippage\r\n   */\r\n  public worstExecutionPrice(slippageTolerance: Percent): Price<TInput, TOutput> {\r\n    return new Price(\r\n      this.inputAmount.currency,\r\n      this.outputAmount.currency,\r\n      this.maximumAmountIn(slippageTolerance).quotient,\r\n      this.minimumAmountOut(slippageTolerance).quotient\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Given a list of pools, and a fixed amount in, returns the top `maxNumResults` trades that go from an input token\r\n   * amount to an output token, making at most `maxHops` hops.\r\n   * Note this does not consider aggregation, as routes are linear. It's possible a better route exists by splitting\r\n   * the amount in among multiple routes.\r\n   * @param pools the pools to consider in finding the best trade\r\n   * @param nextAmountIn exact amount of input currency to spend\r\n   * @param currencyOut the desired currency out\r\n   * @param maxNumResults maximum number of results to return\r\n   * @param maxHops maximum number of hops a returned trade can make, e.g. 1 hop goes through a single pool\r\n   * @param currentPools used in recursion; the current list of pools\r\n   * @param currencyAmountIn used in recursion; the original value of the currencyAmountIn parameter\r\n   * @param bestTrades used in recursion; the current list of best trades\r\n   */\r\n  public static async bestTradeExactIn<TInput extends Currency, TOutput extends Currency>(\r\n    pools: Pool[],\r\n    currencyAmountIn: CurrencyAmount<TInput>,\r\n    currencyOut: TOutput,\r\n    { maxNumResults = 3, maxHops = 3 }: BestTradeOptions = {},\r\n    // used in recursion.\r\n    currentPools: Pool[] = [],\r\n    nextAmountIn: CurrencyAmount<Currency> = currencyAmountIn,\r\n    bestTrades: Trade<TInput, TOutput, TradeType.EXACT_INPUT>[] = []\r\n  ): Promise<Trade<TInput, TOutput, TradeType.EXACT_INPUT>[]> {\r\n    invariant(pools.length > 0, 'POOLS')\r\n    invariant(maxHops > 0, 'MAX_HOPS')\r\n    invariant(currencyAmountIn === nextAmountIn || currentPools.length > 0, 'INVALID_RECURSION')\r\n    const chainId: ChainId | undefined = nextAmountIn.currency.isToken\r\n      ? nextAmountIn.currency.chainId\r\n      : currencyOut.isToken\r\n      ? (currencyOut as Token).chainId\r\n      : undefined\r\n    invariant(chainId !== undefined, 'CHAIN_ID')\r\n\r\n    const amountIn = wrappedCurrencyAmount(nextAmountIn, chainId)\r\n    const tokenOut = wrappedCurrency(currencyOut, chainId)\r\n    for (let i = 0; i < pools.length; i++) {\r\n      const pool = pools[i]\r\n      // pool irrelevant\r\n      if (!currencyEquals(pool.token0, amountIn.currency) && !currencyEquals(pool.token1, amountIn.currency)) continue\r\n\r\n      let amountOut: CurrencyAmount<Token>\r\n      try {\r\n        ;[amountOut] = await pool.getOutputAmount(amountIn)\r\n      } catch (error) {\r\n        // input too low\r\n        if (error.isInsufficientInputAmountError) {\r\n          continue\r\n        }\r\n        throw error\r\n      }\r\n      // we have arrived at the output token, so this is the final trade of one of the paths\r\n      if (amountOut.currency.isToken && amountOut.currency.equals(tokenOut)) {\r\n        sortedInsert(\r\n          bestTrades,\r\n          await Trade.fromRoute(\r\n            new Route([...currentPools, pool], currencyAmountIn.currency, currencyOut),\r\n            currencyAmountIn,\r\n            TradeType.EXACT_INPUT\r\n          ),\r\n          maxNumResults,\r\n          tradeComparator\r\n        )\r\n      } else if (maxHops > 1 && pools.length > 1) {\r\n        const poolsExcludingThisPool = pools.slice(0, i).concat(pools.slice(i + 1, pools.length))\r\n\r\n        // otherwise, consider all the other paths that lead from this token as long as we have not exceeded maxHops\r\n        await Trade.bestTradeExactIn(\r\n          poolsExcludingThisPool,\r\n          currencyAmountIn,\r\n          currencyOut,\r\n          {\r\n            maxNumResults,\r\n            maxHops: maxHops - 1\r\n          },\r\n          [...currentPools, pool],\r\n          amountOut,\r\n          bestTrades\r\n        )\r\n      }\r\n    }\r\n\r\n    return bestTrades\r\n  }\r\n\r\n  /**\r\n   * similar to the above method but instead targets a fixed output amount\r\n   * given a list of pools, and a fixed amount out, returns the top `maxNumResults` trades that go from an input token\r\n   * to an output token amount, making at most `maxHops` hops\r\n   * note this does not consider aggregation, as routes are linear. it's possible a better route exists by splitting\r\n   * the amount in among multiple routes.\r\n   * @param pools the pools to consider in finding the best trade\r\n   * @param currencyIn the currency to spend\r\n   * @param currencyAmountOut the desired currency amount out\r\n   * @param nextAmountOut the exact amount of currency out\r\n   * @param maxNumResults maximum number of results to return\r\n   * @param maxHops maximum number of hops a returned trade can make, e.g. 1 hop goes through a single pool\r\n   * @param currentPools used in recursion; the current list of pools\r\n   * @param bestTrades used in recursion; the current list of best trades\r\n   */\r\n  public static async bestTradeExactOut<TInput extends Currency, TOutput extends Currency>(\r\n    pools: Pool[],\r\n    currencyIn: Currency,\r\n    currencyAmountOut: CurrencyAmount<TOutput>,\r\n    { maxNumResults = 3, maxHops = 3 }: BestTradeOptions = {},\r\n    // used in recursion.\r\n    currentPools: Pool[] = [],\r\n    nextAmountOut: CurrencyAmount<Currency> = currencyAmountOut,\r\n    bestTrades: Trade<TInput, TOutput, TradeType.EXACT_OUTPUT>[] = []\r\n  ): Promise<Trade<TInput, TOutput, TradeType.EXACT_OUTPUT>[]> {\r\n    invariant(pools.length > 0, 'POOLS')\r\n    invariant(maxHops > 0, 'MAX_HOPS')\r\n    invariant(currencyAmountOut === nextAmountOut || currentPools.length > 0, 'INVALID_RECURSION')\r\n    const chainId: ChainId | undefined = nextAmountOut.currency.isToken\r\n      ? nextAmountOut.currency.chainId\r\n      : currencyIn.isToken\r\n      ? currencyIn.chainId\r\n      : undefined\r\n    invariant(chainId !== undefined, 'CHAIN_ID')\r\n\r\n    const amountOut = wrappedCurrencyAmount(nextAmountOut, chainId)\r\n    const tokenIn = wrappedCurrency(currencyIn, chainId)\r\n    for (let i = 0; i < pools.length; i++) {\r\n      const pool = pools[i]\r\n      // pool irrelevant\r\n      if (!currencyEquals(pool.token0, amountOut.currency) && !currencyEquals(pool.token1, amountOut.currency)) continue\r\n\r\n      let amountIn: CurrencyAmount<Token>\r\n      try {\r\n        ;[amountIn] = await pool.getInputAmount(amountOut)\r\n      } catch (error) {\r\n        // not enough liquidity in this pool\r\n        if (error.isInsufficientReservesError) {\r\n          continue\r\n        }\r\n        throw error\r\n      }\r\n      // we have arrived at the input token, so this is the first trade of one of the paths\r\n      if (currencyEquals(amountIn.currency, tokenIn)) {\r\n        sortedInsert(\r\n          bestTrades,\r\n          await Trade.fromRoute(\r\n            new Route([pool, ...currentPools], currencyIn, currencyAmountOut.currency),\r\n            currencyAmountOut,\r\n            TradeType.EXACT_OUTPUT\r\n          ),\r\n          maxNumResults,\r\n          tradeComparator\r\n        )\r\n      } else if (maxHops > 1 && pools.length > 1) {\r\n        const poolsExcludingThisPool = pools.slice(0, i).concat(pools.slice(i + 1, pools.length))\r\n\r\n        // otherwise, consider all the other paths that arrive at this token as long as we have not exceeded maxHops\r\n        await Trade.bestTradeExactOut(\r\n          poolsExcludingThisPool,\r\n          currencyIn,\r\n          currencyAmountOut,\r\n          {\r\n            maxNumResults,\r\n            maxHops: maxHops - 1\r\n          },\r\n          [pool, ...currentPools],\r\n          amountIn,\r\n          bestTrades\r\n        )\r\n      }\r\n    }\r\n\r\n    return bestTrades\r\n  }\r\n}\r\n","import { BigintIsh, Token } from '@uniswap/sdk-core'\nimport { Interface } from '@ethersproject/abi'\nimport { abi } from '@uniswap/v3-periphery/artifacts/contracts/interfaces/ISelfPermit.sol/ISelfPermit.json'\nimport { toHex } from './utils'\n\nexport interface StandardPermitArguments {\n  v: 0 | 1 | 27 | 28\n  r: string\n  s: string\n  amount: BigintIsh\n  deadline: BigintIsh\n}\n\nexport interface AllowedPermitArguments {\n  v: 0 | 1 | 27 | 28\n  r: string\n  s: string\n  nonce: BigintIsh\n  expiry: BigintIsh\n}\n\nexport type PermitOptions = StandardPermitArguments | AllowedPermitArguments\n\n// type guard\nfunction isAllowedPermit(permitOptions: PermitOptions): permitOptions is AllowedPermitArguments {\n  return 'nonce' in permitOptions\n}\n\nexport abstract class SelfPermit {\n  public static INTERFACE: Interface = new Interface(abi)\n\n  protected constructor() {}\n\n  protected static encodePermit(token: Token, options: PermitOptions) {\n    return isAllowedPermit(options)\n      ? SelfPermit.INTERFACE.encodeFunctionData('selfPermitAllowed', [\n          token.address,\n          toHex(options.nonce),\n          toHex(options.expiry),\n          options.v,\n          options.r,\n          options.s\n        ])\n      : SelfPermit.INTERFACE.encodeFunctionData('selfPermit', [\n          token.address,\n          toHex(options.amount),\n          toHex(options.deadline),\n          options.v,\n          options.r,\n          options.s\n        ])\n  }\n}\n","import {\n  BigintIsh,\n  ChainId,\n  Percent,\n  Token,\n  CurrencyAmount,\n  validateAndParseAddress,\n  WETH9,\n  Currency\n} from '@uniswap/sdk-core'\nimport JSBI from 'jsbi'\nimport invariant from 'tiny-invariant'\nimport { Position } from './entities/position'\nimport { ONE, ZERO } from './internalConstants'\nimport { MethodParameters, toHex } from './utils/calldata'\nimport { Interface } from '@ethersproject/abi'\nimport { abi } from '@uniswap/v3-periphery/artifacts/contracts/NonfungiblePositionManager.sol/NonfungiblePositionManager.json'\nimport { PermitOptions, SelfPermit } from './selfPermit'\nimport { ADDRESS_ZERO } from './constants'\n\nconst MaxUint128 = toHex(JSBI.subtract(JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(128)), JSBI.BigInt(1)))\n\nexport interface MintSpecificOptions {\n  /**\n   * The account that should receive the minted NFT.\n   */\n  recipient: string\n\n  /**\n   * Creates pool if not initialized before mint.\n   */\n  createPool?: boolean\n}\n\nexport interface IncreaseSpecificOptions {\n  /**\n   * Indicates the ID of the position to increase liquidity for.\n   */\n  tokenId: BigintIsh\n}\n\n/**\n * Options for producing the calldata to add liquidity.\n */\nexport interface CommonAddLiquidityOptions {\n  /**\n   * How much the pool price is allowed to move.\n   */\n  slippageTolerance: Percent\n\n  /**\n   * When the transaction expires, in epoch seconds.\n   */\n  deadline: BigintIsh\n\n  /**\n   * Whether to spend ether. If true, one of the pool tokens must be WETH, by default false\n   */\n  useEther?: boolean\n\n  /**\n   * The optional permit parameters for spending token0\n   */\n  token0Permit?: PermitOptions\n\n  /**\n   * The optional permit parameters for spending token1\n   */\n  token1Permit?: PermitOptions\n}\n\nexport type MintOptions = CommonAddLiquidityOptions & MintSpecificOptions\nexport type IncreaseOptions = CommonAddLiquidityOptions & IncreaseSpecificOptions\n\nexport type AddLiquidityOptions = MintOptions | IncreaseOptions\n\n// type guard\nfunction isMint(options: AddLiquidityOptions): options is MintOptions {\n  return Object.keys(options).some(k => k === 'recipient')\n}\n\nexport interface CollectOptions {\n  /**\n   * Indicates the ID of the position to collect for.\n   */\n  tokenId: BigintIsh\n\n  /**\n   * Expected value of tokensOwed0, including as-of-yet-unaccounted-for fees/liquidity value to be burned\n   */\n  expectedCurrencyOwed0: CurrencyAmount<Currency>\n\n  /**\n   * Expected value of tokensOwed1, including as-of-yet-unaccounted-for fees/liquidity value to be burned\n   */\n  expectedCurrencyOwed1: CurrencyAmount<Currency>\n\n  /**\n   * The account that should receive the tokens.\n   */\n  recipient: string\n}\n\nexport interface NFTPermitOptions {\n  v: 0 | 1 | 27 | 28\n  r: string\n  s: string\n  deadline: BigintIsh\n  spender: string\n}\n\n/**\n * Options for producing the calldata to exit a position.\n */\nexport interface RemoveLiquidityOptions {\n  /**\n   * The ID of the token to exit\n   */\n  tokenId: BigintIsh\n\n  /**\n   * The percentage of position liquidity to exit.\n   */\n  liquidityPercentage: Percent\n\n  /**\n   * How much the pool price is allowed to move.\n   */\n  slippageTolerance: Percent\n\n  /**\n   * When the transaction expires, in epoch seconds.\n   */\n  deadline: BigintIsh\n\n  /**\n   * Whether the NFT should be burned if the entire position is being exited, by default false.\n   */\n  burnToken?: boolean\n\n  /**\n   * The optional permit of the token ID being exited, in case the exit transaction is being sent by an account that does not own the NFT\n   */\n  permit?: NFTPermitOptions\n\n  /**\n   * Parameters to be passed on to collect\n   */\n  collectOptions: Omit<CollectOptions, 'tokenId'>\n}\n\nexport abstract class NonfungiblePositionManager extends SelfPermit {\n  public static INTERFACE: Interface = new Interface(abi)\n\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {\n    super()\n  }\n\n  public static addCallParameters(position: Position, options: AddLiquidityOptions): MethodParameters {\n    invariant(JSBI.greaterThan(position.liquidity, ZERO), 'ZERO_LIQUIDITY')\n\n    const calldatas: string[] = []\n\n    // get amounts\n    const { amount0: amount0Desired, amount1: amount1Desired } = position.mintAmounts\n\n    // adjust for slippage\n    const minimumAmounts = position.mintAmountsWithSlippage(options.slippageTolerance)\n    const amount0Min = toHex(minimumAmounts.amount0)\n    const amount1Min = toHex(minimumAmounts.amount1)\n\n    const deadline = toHex(options.deadline)\n\n    // create pool if needed\n    if (isMint(options) && options.createPool) {\n      calldatas.push(\n        NonfungiblePositionManager.INTERFACE.encodeFunctionData('createAndInitializePoolIfNecessary', [\n          position.pool.token0.address,\n          position.pool.token1.address,\n          position.pool.fee,\n          toHex(position.pool.sqrtRatioX96)\n        ])\n      )\n    }\n\n    // permits if necessary\n    if (options.token0Permit) {\n      calldatas.push(NonfungiblePositionManager.encodePermit(position.pool.token0, options.token0Permit))\n    }\n    if (options.token1Permit) {\n      calldatas.push(NonfungiblePositionManager.encodePermit(position.pool.token1, options.token1Permit))\n    }\n\n    // mint\n    if (isMint(options)) {\n      const recipient: string = validateAndParseAddress(options.recipient)\n\n      calldatas.push(\n        NonfungiblePositionManager.INTERFACE.encodeFunctionData('mint', [\n          {\n            token0: position.pool.token0.address,\n            token1: position.pool.token1.address,\n            fee: position.pool.fee,\n            tickLower: position.tickLower,\n            tickUpper: position.tickUpper,\n            amount0Desired: toHex(amount0Desired),\n            amount1Desired: toHex(amount1Desired),\n            amount0Min,\n            amount1Min,\n            recipient,\n            deadline\n          }\n        ])\n      )\n    } else {\n      // increase\n      calldatas.push(\n        NonfungiblePositionManager.INTERFACE.encodeFunctionData('increaseLiquidity', [\n          {\n            tokenId: toHex(options.tokenId),\n            amount0Desired: toHex(amount0Desired),\n            amount1Desired: toHex(amount1Desired),\n            amount0Min,\n            amount1Min,\n            deadline\n          }\n        ])\n      )\n    }\n\n    let value: string = toHex(0)\n\n    if (options.useEther) {\n      const weth = WETH9[position.pool.chainId as ChainId]\n      invariant(weth && (position.pool.token0.equals(weth) || position.pool.token1.equals(weth)), 'NO_WETH')\n\n      const wethValue = position.pool.token0.equals(weth) ? amount0Desired : amount1Desired\n\n      // we only need to refund if we're actually sending ETH\n      if (JSBI.greaterThan(wethValue, ZERO)) {\n        calldatas.push(NonfungiblePositionManager.INTERFACE.encodeFunctionData('refundETH'))\n      }\n\n      value = toHex(wethValue)\n    }\n\n    return {\n      calldata:\n        calldatas.length === 1\n          ? calldatas[0]\n          : NonfungiblePositionManager.INTERFACE.encodeFunctionData('multicall', [calldatas]),\n      value\n    }\n  }\n\n  private static encodeCollect(options: CollectOptions): string[] {\n    const calldatas: string[] = []\n\n    const tokenId = toHex(options.tokenId)\n\n    const involvesETH = options.expectedCurrencyOwed0.currency.isEther || options.expectedCurrencyOwed1.currency.isEther\n\n    const recipient = validateAndParseAddress(options.recipient)\n\n    // collect\n    calldatas.push(\n      NonfungiblePositionManager.INTERFACE.encodeFunctionData('collect', [\n        {\n          tokenId,\n          recipient: involvesETH ? ADDRESS_ZERO : recipient,\n          amount0Max: MaxUint128,\n          amount1Max: MaxUint128\n        }\n      ])\n    )\n\n    if (involvesETH) {\n      const ethAmount = options.expectedCurrencyOwed0.currency.isEther\n        ? options.expectedCurrencyOwed0.quotient\n        : options.expectedCurrencyOwed1.quotient\n      const token = options.expectedCurrencyOwed0.currency.isEther\n        ? (options.expectedCurrencyOwed1.currency as Token)\n        : (options.expectedCurrencyOwed0.currency as Token)\n      const tokenAmount = options.expectedCurrencyOwed0.currency.isEther\n        ? options.expectedCurrencyOwed1.quotient\n        : options.expectedCurrencyOwed0.quotient\n\n      calldatas.push(\n        NonfungiblePositionManager.INTERFACE.encodeFunctionData('unwrapWETH9', [toHex(ethAmount), recipient])\n      )\n      calldatas.push(\n        NonfungiblePositionManager.INTERFACE.encodeFunctionData('sweepToken', [\n          token.address,\n          toHex(tokenAmount),\n          recipient\n        ])\n      )\n    }\n\n    return calldatas\n  }\n\n  public static collectCallParameters(options: CollectOptions): MethodParameters {\n    const calldatas: string[] = NonfungiblePositionManager.encodeCollect(options)\n\n    return {\n      calldata:\n        calldatas.length === 1\n          ? calldatas[0]\n          : NonfungiblePositionManager.INTERFACE.encodeFunctionData('multicall', [calldatas]),\n      value: toHex(0)\n    }\n  }\n\n  /**\n   * Produces the calldata for completely or partially exiting a position\n   * @param position the position to exit\n   * @param options additional information necessary for generating the calldata\n   */\n  public static removeCallParameters(position: Position, options: RemoveLiquidityOptions): MethodParameters {\n    const calldatas: string[] = []\n\n    const deadline = toHex(options.deadline)\n    const tokenId = toHex(options.tokenId)\n\n    // construct a partial position with a percentage of liquidity\n    const partialPosition = new Position({\n      pool: position.pool,\n      liquidity: options.liquidityPercentage.multiply(position.liquidity).quotient,\n      tickLower: position.tickLower,\n      tickUpper: position.tickUpper\n    })\n    invariant(JSBI.greaterThan(partialPosition.liquidity, ZERO), 'ZERO_LIQUIDITY')\n\n    // slippage-adjusted underlying amounts\n    const { amount0: amount0Min, amount1: amount1Min } = partialPosition.burnAmountsWithSlippage(\n      options.slippageTolerance\n    )\n\n    if (options.permit) {\n      calldatas.push(\n        NonfungiblePositionManager.INTERFACE.encodeFunctionData('permit', [\n          validateAndParseAddress(options.permit.spender),\n          tokenId,\n          toHex(options.permit.deadline),\n          options.permit.v,\n          options.permit.r,\n          options.permit.s\n        ])\n      )\n    }\n\n    // remove liquidity\n    calldatas.push(\n      NonfungiblePositionManager.INTERFACE.encodeFunctionData('decreaseLiquidity', [\n        {\n          tokenId,\n          liquidity: toHex(partialPosition.liquidity),\n          amount0Min: toHex(amount0Min),\n          amount1Min: toHex(amount1Min),\n          deadline\n        }\n      ])\n    )\n\n    const { expectedCurrencyOwed0, expectedCurrencyOwed1, ...rest } = options.collectOptions\n    calldatas.push(\n      ...NonfungiblePositionManager.encodeCollect({\n        tokenId: options.tokenId,\n        // add the underlying value to the expected currency already owed\n        expectedCurrencyOwed0: expectedCurrencyOwed0.add(\n          expectedCurrencyOwed0.currency.isEther\n            ? CurrencyAmount.ether(amount0Min)\n            : CurrencyAmount.fromRawAmount(expectedCurrencyOwed0.currency as Token, amount0Min)\n        ),\n        expectedCurrencyOwed1: expectedCurrencyOwed1.add(\n          expectedCurrencyOwed1.currency.isEther\n            ? CurrencyAmount.ether(amount1Min)\n            : CurrencyAmount.fromRawAmount(expectedCurrencyOwed1.currency as Token, amount1Min)\n        ),\n        ...rest\n      })\n    )\n\n    if (options.liquidityPercentage.equalTo(ONE)) {\n      if (options.burnToken) {\n        calldatas.push(NonfungiblePositionManager.INTERFACE.encodeFunctionData('burn', [tokenId]))\n      }\n    } else {\n      invariant(options.burnToken !== true, 'CANNOT_BURN')\n    }\n\n    return {\n      calldata: NonfungiblePositionManager.INTERFACE.encodeFunctionData('multicall', [calldatas]),\n      value: toHex(0)\n    }\n  }\n}\n","import { Interface } from '@ethersproject/abi'\nimport { BigintIsh, Currency, Percent, TradeType, validateAndParseAddress } from '@uniswap/sdk-core'\nimport invariant from 'tiny-invariant'\nimport { Trade } from './entities/trade'\nimport { ADDRESS_ZERO } from './constants'\nimport { PermitOptions, SelfPermit } from './selfPermit'\nimport { encodeRouteToPath } from './utils'\nimport { MethodParameters, toHex } from './utils/calldata'\nimport { abi } from '@uniswap/v3-periphery/artifacts/contracts/SwapRouter.sol/SwapRouter.json'\n\nexport interface FeeOptions {\n  /**\n   * The percent of the output that will be taken as a fee.\n   */\n  fee: Percent\n\n  /**\n   * The recipient of the fee.\n   */\n  recipient: string\n}\n\n/**\n * Options for producing the arguments to send calls to the router.\n */\nexport interface SwapOptions {\n  /**\n   * How much the execution price is allowed to move unfavorably from the trade execution price.\n   */\n  slippageTolerance: Percent\n\n  /**\n   * The account that should receive the output.\n   */\n  recipient: string\n\n  /**\n   * When the transaction expires, in epoch seconds.\n   */\n  deadline: BigintIsh\n\n  /**\n   * The optional permit parameters for spending the input.\n   */\n  inputTokenPermit?: PermitOptions\n\n  /**\n   * The optional price limit for the trade.\n   */\n  sqrtPriceLimitX96?: BigintIsh\n\n  /**\n   * Optional information for taking a fee on output.\n   */\n  fee?: FeeOptions\n}\n\n/**\n * Represents the Uniswap V2 SwapRouter, and has static methods for helping execute trades.\n */\nexport abstract class SwapRouter extends SelfPermit {\n  public static INTERFACE: Interface = new Interface(abi)\n\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {\n    super()\n  }\n\n  /**\n   * Produces the on-chain method name to call and the hex encoded parameters to pass as arguments for a given trade.\n   * @param trade to produce call parameters for\n   * @param options options for the call parameters\n   */\n  public static swapCallParameters(\n    trade: Trade<Currency, Currency, TradeType>,\n    options: SwapOptions\n  ): MethodParameters {\n    const calldatas: string[] = []\n\n    // encode permit if necessary\n    if (options.inputTokenPermit) {\n      invariant(trade.inputAmount.currency.isToken, 'NON_TOKEN_PERMIT')\n      calldatas.push(SwapRouter.encodePermit(trade.inputAmount.currency, options.inputTokenPermit))\n    }\n\n    const recipient: string = validateAndParseAddress(options.recipient)\n\n    const deadline = toHex(options.deadline)\n\n    const amountIn: string = toHex(trade.maximumAmountIn(options.slippageTolerance).quotient)\n    console.log('options.slippageTolerance', options.slippageTolerance.toFixed())\n    const amountOut: string = toHex(trade.minimumAmountOut(options.slippageTolerance).quotient)\n\n    const value: string = trade.inputAmount.currency.isEther ? amountIn : toHex(0)\n\n    // flag for whether the trade is single hop or not\n    const singleHop = trade.route.pools.length === 1\n\n    // flag for whether a refund needs to happen\n    const mustRefund = trade.inputAmount.currency.isEther && trade.tradeType === TradeType.EXACT_OUTPUT\n\n    // flags for whether funds should be send first to the router\n    const outputIsEther = trade.outputAmount.currency.isEther\n    const routerMustCustody = outputIsEther || !!options.fee\n\n    if (singleHop) {\n      if (trade.tradeType === TradeType.EXACT_INPUT) {\n        const exactInputSingleParams = {\n          tokenIn: trade.route.tokenPath[0].address,\n          tokenOut: trade.route.tokenPath[1].address,\n          fee: trade.route.pools[0].fee,\n          recipient: routerMustCustody ? ADDRESS_ZERO : recipient,\n          deadline,\n          amountIn,\n          amountOutMinimum: amountOut,\n          sqrtPriceLimitX96: toHex(options.sqrtPriceLimitX96 ?? 0)\n        }\n\n        calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('exactInputSingle', [exactInputSingleParams]))\n      } else {\n        const exactOutputSingleParams = {\n          tokenIn: trade.route.tokenPath[0].address,\n          tokenOut: trade.route.tokenPath[1].address,\n          fee: trade.route.pools[0].fee,\n          recipient: routerMustCustody ? ADDRESS_ZERO : recipient,\n          deadline,\n          amountOut,\n          amountInMaximum: amountIn,\n          sqrtPriceLimitX96: toHex(options.sqrtPriceLimitX96 ?? 0)\n        }\n\n        calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('exactOutputSingle', [exactOutputSingleParams]))\n      }\n    } else {\n      invariant(options.sqrtPriceLimitX96 === undefined, 'MULTIHOP_PRICE_LIMIT')\n\n      const path: string = encodeRouteToPath(trade.route, trade.tradeType === TradeType.EXACT_OUTPUT)\n\n      if (trade.tradeType === TradeType.EXACT_INPUT) {\n        const exactInputParams = {\n          path,\n          recipient: routerMustCustody ? ADDRESS_ZERO : recipient,\n          deadline,\n          amountIn,\n          amountOutMinimum: amountOut\n        }\n\n        calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('exactInput', [exactInputParams]))\n      } else {\n        const exactOutputParams = {\n          path,\n          recipient: routerMustCustody ? ADDRESS_ZERO : recipient,\n          deadline,\n          amountOut,\n          amountInMaximum: amountIn\n        }\n\n        calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('exactOutput', [exactOutputParams]))\n      }\n    }\n\n    // refund\n    if (mustRefund) {\n      calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('refundETH'))\n    }\n\n    // unwrap\n    if (routerMustCustody) {\n      if (!!options.fee) {\n        const feeRecipient: string = validateAndParseAddress(options.fee.recipient)\n        const fee = toHex(options.fee.fee.multiply(10_000).quotient)\n\n        if (outputIsEther) {\n          calldatas.push(\n            SwapRouter.INTERFACE.encodeFunctionData('unwrapWETH9WithFee', [amountOut, recipient, fee, feeRecipient])\n          )\n        } else {\n          calldatas.push(\n            SwapRouter.INTERFACE.encodeFunctionData('sweepTokenWithFee', [\n              trade.route.tokenPath[trade.route.tokenPath.length - 1].address,\n              amountOut,\n              recipient,\n              fee,\n              feeRecipient\n            ])\n          )\n        }\n      } else {\n        calldatas.push(SwapRouter.INTERFACE.encodeFunctionData('unwrapWETH9', [amountOut, recipient]))\n      }\n    }\n\n    return {\n      calldata:\n        calldatas.length === 1 ? calldatas[0] : SwapRouter.INTERFACE.encodeFunctionData('multicall', [calldatas]),\n      value\n    }\n  }\n}\n"],"names":["undefined","FACTORY_ADDRESS","ADDRESS_ZERO","POOL_INIT_CODE_HASH","FeeAmount","TICK_SPACINGS","LOW","MEDIUM","HIGH","NEGATIVE_ONE","JSBI","BigInt","ZERO","ONE","Q96","exponentiate","Q192","computePoolAddress","factoryAddress","tokenA","tokenB","fee","sortsBefore","token0","token1","getCreate2Address","keccak256","defaultAbiCoder","encode","address","LiquidityMath","addDelta","x","y","lessThan","subtract","multiply","add","FullMath","mulDivRoundingUp","a","b","denominator","product","result","divide","notEqual","remainder","MaxUint160","multiplyIn256","bitwiseAnd","MaxUint256","addIn256","sum","SqrtPriceMath","getAmount0Delta","sqrtRatioAX96","sqrtRatioBX96","liquidity","roundUp","greaterThan","numerator1","leftShift","numerator2","getAmount1Delta","getNextSqrtPriceFromInput","sqrtPX96","amountIn","zeroForOne","invariant","getNextSqrtPriceFromAmount0RoundingUp","getNextSqrtPriceFromAmount1RoundingDown","getNextSqrtPriceFromOutput","amountOut","amount","equal","greaterThanOrEqual","quotient","lessThanOrEqual","MAX_FEE","SwapMath","computeSwapStep","sqrtRatioCurrentX96","sqrtRatioTargetX96","amountRemaining","feePips","returnValues","exactIn","amountRemainingLessFee","sqrtRatioNextX96","max","feeAmount","TWO","POWERS_OF_2","map","pow","mostSignificantBit","msb","power","min","signedRightShift","mulShift","val","mulBy","Q32","TickMath","getSqrtRatioAtTick","tick","MIN_TICK","MAX_TICK","Number","isInteger","absTick","ratio","getTickAtSqrtRatio","sqrtRatioX96","MIN_SQRT_RATIO","MAX_SQRT_RATIO","sqrtRatioX128","r","log_2","i","f","bitwiseOr","log_sqrt10001","tickLow","toNumber","tickHigh","NoTickDataProvider","getTick","_tick","Error","ERROR_MESSAGE","nextInitializedTickWithinOneWord","_lte","_tickSpacing","isSorted","list","comparator","length","tickComparator","index","TickList","validateList","ticks","tickSpacing","every","reduce","accumulator","liquidityNet","isBelowSmallest","isAtOrAboveLargest","binarySearch","l","Math","floor","nextInitializedTick","lte","compressed","wordPos","minimum","maximum","toHex","bigintIsh","bigInt","hex","toString","wrappedCurrency","currency","chainId","isToken","WJU","Token","isEther","WETH9","encodeRouteToPath","route","exactOutput","firstInputToken","input","pools","pool","inputToken","path","types","outputToken","equals","pack","reverse","encodeSqrtRatioX96","amount1","amount0","numerator","ratioX192","sqrt","maxLiquidityForAmount0Imprecise","intermediate","maxLiquidityForAmount0Precise","maxLiquidityForAmount1","maxLiquidityForAmounts","useFullPrecision","maxLiquidityForAmount0","liquidity0","liquidity1","nearestUsableTick","rounded","round","tickToPrice","baseToken","quoteToken","Price","priceToClosestTick","price","sorted","baseCurrency","quoteCurrency","nextTickPrice","Tick","liquidityGross","TickListDataProvider","ticksMapped","t","NO_TICK_DATA_PROVIDER_DEFAULT","Pool","tickCurrent","tickCurrentSqrtRatioX96","nextTickSqrtRatioX96","tickDataProvider","Array","isArray","getAddress","involvesToken","token","priceOf","token0Price","token1Price","getOutputAmount","inputAmount","sqrtPriceLimitX96","swap","outputAmount","amountCalculated","CurrencyAmount","fromRawAmount","getInputAmount","amountSpecified","exactInput","state","amountSpecifiedRemaining","sqrtPriceX96","step","sqrtPriceStartX96","tickNext","initialized","sqrtPriceNextX96","_token0Price","_token1Price","Position","tickLower","tickUpper","ratiosAfterSlippage","slippageTolerance","priceLower","asFraction","Percent","priceUpper","sqrtRatioX96Lower","sqrtRatioX96Upper","mintAmountsWithSlippage","poolLower","poolUpper","positionThatWillBeCreated","fromAmounts","mintAmounts","burnAmountsWithSlippage","fromAmount0","fromAmount1","_token0Amount","_token1Amount","_mintAmounts","Route","output","allOnSameChain","wrappedInput","tokenPath","entries","currentInputToken","nextToken","push","_midPrice","slice","nextInput","tradeComparator","currencyEquals","equalTo","Trade","tradeType","fromRoute","TradeType","EXACT_INPUT","exactOut","EXACT_OUTPUT","amounts","wrappedCurrencyAmount","fromFractionalAmount","createUncheckedTrade","constructorArguments","minimumAmountOut","console","log","q","Fraction","e","error","slippageAdjustedAmountOut","invert","maximumAmountIn","slippageAdjustedAmountIn","worstExecutionPrice","bestTradeExactIn","currencyAmountIn","currencyOut","currentPools","nextAmountIn","bestTrades","maxNumResults","maxHops","tokenOut","isInsufficientInputAmountError","sortedInsert","poolsExcludingThisPool","concat","bestTradeExactOut","currencyIn","currencyAmountOut","nextAmountOut","tokenIn","isInsufficientReservesError","_executionPrice","_priceImpact","computePriceImpact","midPrice","isAllowedPermit","permitOptions","SelfPermit","encodePermit","options","INTERFACE","encodeFunctionData","nonce","expiry","v","s","deadline","Interface","abi","MaxUint128","isMint","Object","keys","some","k","NonfungiblePositionManager","addCallParameters","position","calldatas","amount0Desired","amount1Desired","minimumAmounts","amount0Min","amount1Min","createPool","token0Permit","token1Permit","recipient","validateAndParseAddress","tokenId","value","useEther","weth","wethValue","calldata","encodeCollect","involvesETH","expectedCurrencyOwed0","expectedCurrencyOwed1","amount0Max","amount1Max","ethAmount","tokenAmount","collectCallParameters","removeCallParameters","partialPosition","liquidityPercentage","permit","spender","collectOptions","rest","ether","burnToken","SwapRouter","swapCallParameters","trade","inputTokenPermit","toFixed","singleHop","mustRefund","outputIsEther","routerMustCustody","exactInputSingleParams","amountOutMinimum","exactOutputSingleParams","amountInMaximum","exactInputParams","exactOutputParams","feeRecipient"],"mappings":"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"}